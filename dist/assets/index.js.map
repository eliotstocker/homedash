{"version":3,"file":"index.js","sources":["../../src/models/device.ts","../../src/providers/hubitat.ts","../../src/providers/iProvider.ts","../../src/store/urlReflector.ts","../../src/store/app.ts","../../src/store/home.ts","../../src/store/rooms.ts","../../src/store/devices.ts","../../src/store/groups.ts","../../src/models/group.ts","../../src/models/room.ts","../../src/store/changeListener.ts","../../src/state.ts","../../src/components/tiles/tile-base.ts","../../src/components/tiles/tile-editable.ts","../../src/components/tiles/tile-camera.ts","../../src/components/circular-progress.ts","../../src/components/tiles/tile-temp.ts","../../src/components/tiles/tile-hvac.ts","../../src/components/tiles/tile-clickable.ts","../../src/components/tiles/tile-draggable.ts","../../src/components/tiles/tile-light.ts","../../src/components/tiles/tile-lock.ts","../../src/components/tiles/tile-media.ts","../../src/components/tiles/tile-switch.ts","../../src/components/tiles/tile-window.ts","../../src/components/tiles/tile-proxy.ts","../../src/component-utils.ts","../../src/components/device-grid.ts","../../src/components/info-bar.ts","../../src/components/popovers/popover-base.ts","../../src/components/popovers/popover-group.ts","../../src/components/popovers/popover-device.ts","../../src/components/popovers/popover-room-settings.ts","../../src/components/popovers/controls/light-controls.ts","../../src/components/popovers/controls/switch-controls.ts","../../src/index.ts"],"sourcesContent":["import { Meta } from \"./meta\";\nimport { State } from \"./state\";\nimport { Prefs } from \"./prefs\";\nimport iItemModel from './iItem';\n\nexport enum deviceTypes {\n    light = 'light',\n    hvac = 'hvac',\n    temp = 'temp',\n    media = 'media',\n    lock = 'lock',\n    camera = 'camera',\n    switch = 'switch',\n    window = 'window',\n    unknown = 'unknown'\n}\n\nexport type Device = {\n    type:deviceTypes,\n    name:string,\n    label:string,\n    id:number,\n    meta:Meta,\n    state:State,\n    prefs:Prefs,\n    ingroup:number|null,\n}\n\nexport default class DeviceModel implements iItemModel, Device {\n    public type:deviceTypes;\n    public name:string;\n    public label:string;\n    public id:number;\n    public meta:Meta;\n    public state:State;\n    public prefs:Prefs;\n    public ingroup:number|null;\n\n    getState() {\n        return this.state;\n    }\n\n    getMeta(): Meta {\n        return this.meta;\n    }\n\n    getPrefs(): Prefs {\n        return this.prefs;\n    }\n\n    setState(state: State) {\n        Object.entries(state).forEach(([key, value]) => {\n            this.state[key] = value\n        });\n    }\n\n    setPrefs(prefs: Prefs) {\n        Object.entries(prefs).forEach(([key, value]) => {\n            this.prefs[key] = value\n        });\n    }\n\n    static fromObject(obj: Device): DeviceModel {\n        const device = Object.create(DeviceModel.prototype);\n        return Object.assign(device, obj);\n    }\n\n    toObject(): Device {\n        return {\n            type: this.type,\n            name: this.name,\n            label: this.label,\n            id: this.id,\n            meta: this.meta,\n            state: this.state,\n            prefs: this.prefs,\n            ingroup: this.ingroup\n        }\n    }\n}","import Home from \"../models/home\";\nimport {type Device} from \"../models/device\";\nimport {type Group} from \"../models/group\";\nimport {type Room} from \"../models/room\";\nimport {State} from \"../models/state\";\nimport iProvider, { homeData, providerEvents } from \"./iProvider\";\nimport Axios from 'axios';\nimport { RoomPrefs } from \"../models/prefs\";\n\ntype rawRoom = {\n    name:    string;\n    id:      number;\n    devices: Device[];\n    prefs:   RoomPrefs;\n}\n\ntype hubitatData = {\n    groupIds:  Map<number, string>;\n    rooms: rawRoom[]\n    home: Home;\n    service: string;\n    version: string;\n}\n\nconst quickPollEnabled = false;\n\nexport default class Hubitat implements iProvider {\n    private rawData:       hubitatData;\n    private homeData:      homeData;\n    private server:        string;\n    private token:         string;\n    private session:       string;\n    private pollTimeout:   NodeJS.Timeout;\n    private pollInterval:  number;\n    private eventListeners: {deviceUpdates: ((devices: number[]) => void)[], roomRefresh: ((devices: Device[], room: Room) => void)[]} = {deviceUpdates: [], roomRefresh: []}\n\n    constructor(server: string, token: string) {\n        this.server = server;\n        this.token = token;\n        this.pollInterval = 10000;\n\n        if(!this.server.endsWith('/')) {\n            this.server += '/';\n        }\n    }\n\n    public addEventListener(event: providerEvents, callback: (devices: number[]) => void): void {\n        this.eventListeners[event].push(callback);\n    }\n\n    public setDeviceValue(deviceId: number, attribute: string, value: any): Promise<never> {\n        return Axios.post(this.server + 'device/' + deviceId + '?access_token=' + this.token, {\n            attribute,\n            value\n        })\n            .then(this.quickPoll.bind(this));\n\n    }\n\n    public setGroupValue(group: Group, attribute: string, value: any): Promise<never> {\n        return Axios.post(this.server + 'group/' + group.id + '?access_token=' + this.token, {\n            devices: group.devices,\n            attribute,\n            value\n        })\n            .then(this.quickPoll.bind(this));\n    }\n\n    public setRoomPref(roomId: number, attribute: string, value):Promise<void> {\n        return Axios.post(this.server + 'room/' + roomId + '?access_token=' + this.token, {\n            attribute,\n            value\n        })\n            .then(this.quickPoll.bind(this));\n    }\n\n    public init(): Promise<void> {\n        return Axios.get(this.server + 'home' + '?access_token=' + this.token)\n            .then(d => d.data as hubitatData)\n            .then(data => this.rawData = data)\n            .then(() => {\n                this.homeData = this.formatDevices(this.filterUnknownDevices(this.rawData));\n                return this.createSession();\n            })\n    }\n\n    private createSession(): Promise<void> {\n        return Axios.post(this.server + 'session' + '?access_token=' + this.token)\n            .then(d => d.data)\n            .then(({id}) => this.session = id)\n            .then(() => {\n                this.pollTimeout = setTimeout(this.pollSession.bind(this), this.pollInterval)\n            });\n    }\n\n    private quickPoll() {\n        if(quickPollEnabled) {\n            clearTimeout(this.pollTimeout);\n            this.pollTimeout = setTimeout(this.pollSession.bind(this), 200);\n        }\n    }\n\n    private pollSession():  Promise<void> {\n        clearTimeout(this.pollTimeout);\n        \n        return Axios.get(this.server + 'session/' + this.session + '?access_token=' + this.token)\n            .then(d => d.data as {changes: [number: State]})\n            .then(({changes}) => {\n                if(Object.keys(changes).length > 0) {\n                    Object.entries(changes).map(([id, state]) => this.setStateByDeviceId(parseInt(id), state));\n                    this.eventListeners.deviceUpdates.forEach(callback => callback(Object.keys(changes).map(id => parseInt(id))))\n                }\n            })\n            .then(() =>{\n                this.pollTimeout = setTimeout(this.pollSession.bind(this), this.pollInterval)\n            })\n            .catch(() => \n                {this.pollTimeout = setTimeout(this.pollSession.bind(this), this.pollInterval)\n            });\n    }\n\n    private setStateByDeviceId(id: number, state: State) : void {\n        const device = this.getDeviceById(id);\n\n        if(!device) {\n            //ignore\n            return;\n        }\n\n        Object.assign(device.state, state);\n    }\n\n    private getDeviceById(id: number): Device {\n        const device = this.homeData.devices.find(item => {\n            return item.id == id;\n        });\n\n        if(!device) {\n            console.log('cant find device', id);\n            return null;\n        }\n\n        return device;\n    }\n\n    private filterUnknownDevices(data:hubitatData) {\n        return {\n            ...data,\n            rooms: data.rooms.map(room => ({\n                ...room,\n                devices: room.devices.filter(({type}) => type !== 'unknown')\n            }))\n        };\n    }\n\n    private getGroupId(data:hubitatData, groupName:string): {id: number, new: boolean} {\n        const found = parseInt(Object.entries(data.groupIds).find(([_, name]) => name === groupName)?.[0]);\n\n        if(found) {\n            return {id: found, new: false};\n        }\n\n        //generate unique id for new group start at 5000 to avoid device Ids\n        let id = 5000;\n        while(Object.keys(data.groupIds).includes(id.toString())) {\n            id++;\n        }\n\n\n        data.groupIds[id] = groupName;\n        return {id, new: true};\n    }\n\n    private formatDevices(data:hubitatData) : homeData {\n        const groups = data.rooms.flatMap(room => this.generateGroupsForRoom(room.devices as Device[], data));\n        const devices = this.assignDevicesToGroups(data.rooms.flatMap(({devices}) => devices) as Device[], groups);\n        const rooms = data.rooms.map(room => this.generateRoomFromData(room, groups));\n\n        return {\n            ...data,\n            devices,\n            groups,\n            rooms\n        }\n    }\n\n    private generateGroupsForRoom(devices: Device[], data: hubitatData): Group[] {\n        const groups = devices.reduce((acc, device) => {\n            const possibleGroupName = device.label.replace(/\\s([\\d-_]+)$/, '');\n            const group = acc.find(g => device.type === g.type && g.label === possibleGroupName) as Group;\n\n            if(group) {\n                device.ingroup = group.id;\n                group.devices.push(device.id);\n            }\n\n            if(possibleGroupName != device.label && devices.some(otherDev => otherDev.label.match(RegExp(`${possibleGroupName}\\\\s([\\\\d\\\\-_]+)$`)))) {\n                const groupId = this.getGroupId(data, possibleGroupName);\n                \n                const group: Group = {\n                    label: possibleGroupName,\n                    type: device.type,\n                    id: groupId.id,\n                    devices: [\n                        device.id\n                    ],\n                    persisted: !groupId.new\n                };\n\n                device.ingroup = group.id;\n                acc.push(group);\n            }\n\n            return acc;\n        }, [])\n        .filter(group => group.devices.length > 1);\n\n        groups\n            .filter(({persisted}) => !persisted)\n            .map(this.persistGroup.bind(this))\n\n        return groups;\n    }\n\n    private generateRoomFromData(room: rawRoom, groups: Group[]) : Room {\n        const groupsForDevices = [...new Set(room.devices.map(device => groups.find(group => group.devices.includes(device.id))).filter(group => group))];\n        const devicesExcludingGroups = room.devices.filter(device => !groups.find(group => group.devices.includes(device.id)));\n\n        const devices = [\n            ...devicesExcludingGroups,\n            ...groupsForDevices\n        ]\n            .map(({id}) => id)\n            .sort((a, b) => {\n                if(room.prefs.order) {\n                    const ia = room.prefs.order.indexOf(a);\n                    const ib = room.prefs.order.indexOf(b);\n\n                    if(ia < 0) return 1;\n                    if(ib < 0) return -1;\n\n                    return ia - ib;\n                }\n\n                return 0;\n            });\n\n        return {\n            ...room,\n            devices,\n        }\n    }\n\n    private assignDevicesToGroups(devices: Device[], groups: Group[]) : Device[]{\n        return devices.map(device => {\n            const group = groups.find(({devices}) => devices.includes(device.id));\n            if (group) {\n                device.ingroup = group.id;\n            }\n\n            return device;\n        });\n    }\n\n    private persistGroup(group:Group): Promise<void> {\n        return Axios.post(this.server + 'group?access_token=' + this.token, {\n            id: group.id,\n            name: group.label\n        })\n    }\n\n    private updateDevicesByRoom(roomId:number): Promise<void> {\n        return Axios.get(this.server + `room/${roomId}?access_token=` + this.token)\n            .then(d => d.data as rawRoom)\n            .then(rawRoom => {\n                const devices = rawRoom.devices;\n                const room = this.generateRoomFromData(rawRoom, this.homeData.groups);\n\n                //TODO: update homedata.rooms\n\n                console.log('room updated');\n\n                this.eventListeners.roomRefresh.forEach(callback => callback(devices, room));\n            })\n    }\n\n    public getHome(): Home {\n        if(!this.homeData) {\n            throw new Error(\"Provided not initialised\");\n        }\n\n        return this.homeData.home;\n    }\n\n    public getRooms(): Room[] {\n        if(!this.homeData) {\n            throw new Error(\"Provided not initialised\");\n        }\n        return this.homeData.rooms;\n    }\n\n    public getDevices(): Device[] {\n        return this.homeData.devices;\n    }\n\n    public getGroups(): Group[] {\n        return this.homeData.groups;\n    }\n\n    public refreshRoom(id:number) {\n        return this.updateDevicesByRoom(id);\n    }\n}","import {Device} from \"../models/device\"\nimport {Group} from \"../models/group\"\nimport Home from \"../models/home\"\nimport {Room} from \"../models/room\"\n\nexport type homeData = {\n    service: string,\n    version: string,\n    rooms:   Room[],\n    devices: Device[],\n    groups:  Group[],\n    home:    Home,\n    groupIds:  Map<number, string>\n}\n\nexport default interface iProvider {\n    init():Promise<void>\n    refreshRoom(id:number):Promise<void>\n    getHome():Home\n    getRooms():Room[]\n    getDevices():Device[]\n    getGroups():Group[]\n    setDeviceValue(deviceId:number, attribute: string, value: any):Promise<void>\n    setGroupValue(group:Group, attribute: string, value: any):Promise<void>\n    setRoomPref(roomId: number, attribute: string, value: any):Promise<void>\n    addEventListener(event: String, callback: (...args: any) => void):void\n}\n\nexport enum providerEvents {\n    deviceUpdates = \"deviceUpdates\",\n    roomRefresh = \"roomRefresh\"\n}","import { createListenerMiddleware } from '@reduxjs/toolkit';\nimport { appStatePartial, infoType } from './app';\n\n\nexport const urlReflectorMiddleware = createListenerMiddleware();\n\nurlReflectorMiddleware.startListening({\n    actionCreator: 'app',\n    effect: async (action) => {\n        const currentState = parseQuery();\n        switch(action.type) {\n            case 'app/setRoom':\n                currentState.room = action.payload as number;\n                break;\n            case 'app/setFullscreen':\n                currentState.fullscreen = action.payload as boolean;\n                break;\n        }\n\n        setQuery(currentState);\n    }\n});\n\nexport function parseQuery(): appStatePartial {\n    const queryString = window.location.search.substring(1);\n\n    if(queryString.length < 1) {\n        return {};\n    }\n\n    var pairs = (queryString).split('&');\n\n    if(pairs.length < 1) {\n        return {};\n    }\n\n    return pairs.reduce((acc, kv) => {\n        const [k, v] = kv.split('=');\n        return {\n            ...acc,\n            [decodeURIComponent(k)]: typeValue(decodeURIComponent(v || ''))\n        }\n    }, {});\n}\n\nfunction typeValue(value) {\n    if(isFinite(value)) {\n        return parseInt(value);\n    }\n\n    const lc = value.toLowerCase();\n    if(lc == 'true' || lc == 'false') {\n        return lc == 'true';\n    }\n\n    if (infoType[value] != null) {\n        return infoType[value];\n    }\n\n    return value;\n}\n\nfunction setQuery(state) {\n    const url = window.location.pathname;\n    window.history.pushState(null, 'Room', url + '?' + serialiseObject(state));\n}\n\nfunction serialiseObject(state) {\n    return Object.entries(state).map(([key, value]) => {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n    }).join('&');\n}\n\nexport default urlReflectorMiddleware;","import { createSlice } from '@reduxjs/toolkit';\nimport { parseQuery } from './urlReflector';\n\nexport enum infoType {\n  dateTime,\n  minimal,\n  full,\n  calendar\n}\n\nexport type appStatePartial = {\n  fullscreen?: boolean,\n  room?: number,\n  infoBar?: infoType\n}\n\ntype appState = {\n    fullscreen: boolean,\n    room: number,\n    infoBar?: infoType\n}\n\nconst initialState: appState = {\n    fullscreen: false,\n    room: 0,\n    ...parseQuery()\n};\n\nconst appSlice = createSlice({\n    name: 'app',\n    initialState,\n    reducers: {\n      setRoom(state, action: {payload: number}) {\n          state.room = action.payload;\n      }\n    },\n  });\n\nexport const { setRoom } = appSlice.actions;\nexport default appSlice.reducer;","import { createSlice } from '@reduxjs/toolkit'\nimport Home from \"../models/home\";\n\nconst ACTION_INIT_HOME = \"INIT_HOME\";\n\nconst initialState: Home = {\n    name: 'Loading...',\n    baseUrl: '',\n    tempScale: 'c',\n    lastUpdate: Date.now(),\n    location: {\n        longitude: 0,\n        latitude: 0,\n    },\n    sunrise: Date.now(),\n    sunset: Date.now()\n};\n\nconst homeSlice = createSlice({\n  name: 'home',\n  initialState,\n  reducers: {\n    initHome(state, action: {payload: Home}) {\n        Object.assign(state, action.payload);\n    },\n    homeUpdated(state) {\n        state.lastUpdate = Date.now();\n    }\n  },\n});\n\nexport const { initHome, homeUpdated } = homeSlice.actions;\nexport default homeSlice.reducer;","import { createSlice } from '@reduxjs/toolkit'\nimport { Room } from '../models/room';\n\nconst initialState: Room[] = [];\n\nconst roomsSlice = createSlice({\n  name: 'rooms',\n  initialState,\n  reducers: {\n    roomAdd(state, action: {payload:Room}) {\n        state.push(structuredClone(action.payload));\n    },\n    roomRefresh(state, action: {payload:Room}) {\n      //replace or add room;\n      //replace or add device;\n      const room = state.find(({id}) => id == action.payload.id);\n\n      if(!room) {\n        this.roomAdd(state, action);\n        return;\n      }\n\n      Object.entries(action.payload).forEach(([k,v]) => {\n        room[k] = v;\n      });\n    },\n    swapDeviceOrder(state, action: {payload: {roomId: number, swapDevices: number[]}}) {\n      console.log(state);\n\n      const room = state.find(({id}) => id == action.payload.roomId);\n\n      console.log(room, action.payload.roomId);\n\n      const swapDevices = action.payload.swapDevices;\n\n      const devices = room.devices;\n      console.log(devices.indexOf(swapDevices[0]), devices.indexOf(swapDevices[1])); \n\n      devices[devices.indexOf(swapDevices[0])] = devices.splice(devices.indexOf(swapDevices[1]), 1, devices[devices.indexOf(swapDevices[0])])[0];\n      \n      console.log(devices);\n\n      room.devices = devices;\n    }\n  },\n});\n\nexport const { roomAdd, roomRefresh, swapDeviceOrder } = roomsSlice.actions;\nexport default roomsSlice.reducer;\n","import { createSlice } from '@reduxjs/toolkit'\nimport { Device } from '../models/device';\n\ntype SliceState = Device[];\n\nconst initialState: SliceState = [];\n\nconst devicesSlice = createSlice({\n  name: 'devices',\n  initialState,\n  reducers: {\n    deviceAdd(state, action: {payload:Device}) {\n      state.push(structuredClone(action.payload));\n    },\n    deviceRefresh(state, action: {payload:Device}) {\n      //replace or add device;\n      const device = state.find(({id}) => id == action.payload.id);\n\n      if(!device) {\n        this.deviceAdd(state, action);\n        return;\n      }\n\n      Object.entries(action.payload).forEach(([k,v]) => {\n        device[k] = v;\n      });\n    },\n    setDeviceState(state, action: {payload: {device: number, state: object}}) {\n      let device = state.find(({id}) => id == action.payload.device);\n\n      Object.assign(device.state, action.payload.state);\n    },\n    updateDeviceState(state, action: {payload: {device: number, state: object}}) {\n      let device = state.find(({id}) => id == action.payload.device);\n      \n      if(!device) {\n        return; //cant find device :(\n      }\n      \n      Object.assign(device.state, action.payload.state);\n    }\n  },\n});\n\nexport const { deviceAdd, deviceRefresh, setDeviceState, updateDeviceState } = devicesSlice.actions;\nexport default devicesSlice.reducer;\n","import { createSlice } from '@reduxjs/toolkit'\nimport { Group } from '../models/group';\n\ntype SliceState = Group[];\n\nconst initialState: SliceState = [];\n\nconst groupsSlice = createSlice({\n  name: 'groups',\n  initialState,\n  reducers: {\n    groupAdd(state, action: {payload: Group}) {\n      state.push(structuredClone(action.payload));\n    },\n    setGroupState(state, action: {payload: {group: number, state: object}}) {\n      let group = state.find(({id}) => id == action.payload.group);\n\n      //TODO: do we need to store state for the gorup or just commit JIT from devices?\n      //Object.assign(group.state, action.payload.state);\n    }\n  },\n});\n\nexport const { groupAdd, setGroupState } = groupsSlice.actions;\nexport default groupsSlice.reducer;\n","import DeviceModel, { deviceTypes, Device } from \"./device\";\nimport iItemModel, { iItem } from './iItem';\nimport { Meta } from \"./meta\";\nimport { State } from \"./state\";\nimport { Prefs } from \"./prefs\";\n\nexport type Group = {\n    type:      deviceTypes,\n    label:     string,\n    id:        number,\n    devices:   number[],\n    persisted: boolean\n}\n\nexport default class GroupModel implements iItemModel {\n    public type:deviceTypes;\n    public label:string;\n    public id:number;\n    public devices:Device[] = [];\n    public persisted:boolean = false;\n\n    constructor(name:string, type:deviceTypes, id?:number) {\n        this.label = name;\n        this.type = type;\n        this.id = id ? id : Math.floor(Math.random() * 999);\n        if(id) {\n            this.persisted = true;\n        }\n    }\n    \n    getMeta(): Meta {\n        return this.devices.reduce((acc, {meta}) => {\n            return Object.entries(meta).reduce((inner, [k,v]) => {\n                if(!(k in inner)) {\n                    return {\n                        ...inner,\n                        [k]: v\n                    }\n                }\n                if(v) {\n                    return {\n                        ...inner,\n                        [k]: v\n                    }\n                }\n                return inner;\n            }, acc)\n        }, {})\n    }\n\n    getState(): State {\n        const vals = this.devices.reduce((acc, device) => {\n            return Object.entries(device.state).reduce((inner, [stateKey, stateVal]) => {\n                if(!inner[stateKey]) {\n                    inner[stateKey] = [];\n                }\n                inner[stateKey].push(stateVal);\n\n                return inner;\n            }, acc);\n        }, {});\n\n        return Object.fromEntries(\n            Object.entries(vals)\n                .map(([key, vals]) => ([key, this.getStateValue(vals as any[])]))\n        ) as State;\n    }\n    \n    getPrefs(): Prefs {\n        return {};\n    }\n\n    private getStateValue(vals: any[]) {\n        if(typeof vals[0] == 'number') {\n            return Math.round(vals.reduce((acc, val) => acc + val, 0) / vals.length);\n        }\n\n        if(typeof vals[0] == 'boolean') {\n            return vals.reduce((acc, val) => acc || val, false)\n        }\n\n        if(typeof vals[0] == 'string') {\n            return vals.reduce((acc, val) => acc == 'on' || val == 'on' ? 'on' : (val == 'off' ? acc : val), 'off')\n        }\n    }\n\n    static fromObject(obj: Group, devices: Device[]): GroupModel {\n        if(!obj) {\n            return null;\n        }\n\n        const group = Object.create(GroupModel.prototype);\n        return Object.assign(group, {\n            ...obj,\n            devices: obj.devices.map(dev => DeviceModel.fromObject(devices.find(({id}) => id == dev)))\n        });\n    }\n\n    toObject(): Group {\n        return {\n            type: this.type,\n            label: this.label,\n            id: this.id,\n            devices: this.devices.map(({id}) => id),\n            persisted : this.persisted\n        };\n    }\n}","import DeviceModel, { Device } from './device';\nimport GroupModel, { Group } from './group';\nimport iItemModel, { iItem } from './iItem';\nimport { RoomPrefs } from './prefs';\n\nexport type Room = {\n    name:    string,\n    id:      number,\n    devices: number[],\n    prefs:   RoomPrefs\n}\n\nexport default class RoomModel {\n    public name:string;\n    public id:number;\n    public devices:iItemModel[];\n    public prefs:RoomPrefs;\n\n    static fromObject(obj: Room, devices: Device[], groups: Group[]): RoomModel {\n        if(!obj) {\n            return null;\n        }\n\n        let device = Object.create(RoomModel.prototype);\n        return Object.assign(device, {\n            ...obj,\n            devices: obj.devices.map(dev => {\n                const group = groups.find(({id}) => id == dev);\n                if(group) {\n                    return GroupModel.fromObject(group as Group, devices);\n                }\n\n                const device = devices.find(({id}) => id == dev);\n                if(device) {\n                    return DeviceModel.fromObject(device as Device);\n                }\n\n                throw new Error(`device: '${dev}' not found`);\n            })\n        });\n    }\n\n    toObject() : Room {\n        return {\n            name: this.name,\n            id: this.id,\n            devices: this.devices.map(item => item.id),\n            prefs: this.prefs\n        };\n    }\n}","import { createListenerMiddleware } from '@reduxjs/toolkit';\nimport { setDeviceState } from './devices';\n\nconst callbacks = [];\n\nexport const changeListenerMiddleware = createListenerMiddleware();\n\nexport function addEventListener(callback: (device: number, stateChanges: object) => void) {\n    callbacks.push(callback);\n}\n\nchangeListenerMiddleware.startListening({\n    actionCreator: setDeviceState,\n    effect: async (action) => {\n        callbacks.forEach(callback => {\n            callback(action.payload.device, action.payload.state);\n        });\n    }\n})\n\nexport default changeListenerMiddleware;","import { configureStore, EnhancedStore } from '@reduxjs/toolkit';\nimport watch from 'redux-watch'\nimport appReducer, { setRoom as setRoomAction } from './store/app';\nimport homeReducer, { homeUpdated, initHome } from './store/home';\nimport roomReducer, { roomAdd, roomRefresh, swapDeviceOrder } from './store/rooms';\nimport devicesReducer, { deviceAdd, deviceRefresh, setDeviceState as setDeviceStateAction, updateDeviceState } from './store/devices';\nimport groupReducer, { groupAdd } from './store/groups';\nimport RoomModel, { type Room } from \"./models/room\";\nimport iProvider from \"./providers/iProvider\";\nimport DeviceModel, { Device } from \"./models/device\";\nimport changeListenerMiddleware from './store/changeListener';\nimport urlReflectorMiddleware from './store/urlReflector';\n\nexport const store = configureStore({\n    reducer: {\n        app: appReducer,\n        home: homeReducer,\n        rooms: roomReducer,\n        devices: devicesReducer,\n        groups: groupReducer\n    },\n    middleware: (getDefaultMiddleware) =>\n        getDefaultMiddleware().prepend(changeListenerMiddleware.middleware, urlReflectorMiddleware.middleware),\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n\nexport default store;\n\nexport function fromProvider(provider: iProvider) : EnhancedStore {\n    store.dispatch(initHome(provider.getHome()));\n\n    provider.getRooms().forEach(room => {\n        store.dispatch(roomAdd(room));\n    });\n\n    provider.getDevices().forEach(device => {\n        store.dispatch(deviceAdd(device));\n    });\n\n    provider.getGroups().forEach(group => {\n        store.dispatch(groupAdd(group));\n    });\n\n    return store;\n}\n\nexport function fromProviderUpdate(devicesUpdated: DeviceModel[]) {\n    store.dispatch(homeUpdated());\n\n    devicesUpdated.forEach(device => {\n        if(shouldDispatchUpdate(getDevice(device.id), device.getState())) {\n            store.dispatch(updateDeviceState({device: device.id, state: device.getState()}));\n        }\n    })\n}\n\nexport function refreshDevices(devices: Device[]) {\n    devices.forEach(device => {\n        store.dispatch(deviceRefresh(device));\n    });\n}\n\nexport function refreshRoom(room: Room) {\n    store.dispatch(roomRefresh(room));\n}\n\nexport function setRoom(id: number) : void {\n    store.dispatch(setRoomAction(id));\n}\n\nexport function getRoom(id: Number) : RoomModel {\n    const {rooms, devices, groups} = store.getState();\n    return RoomModel.fromObject(rooms.find(room => room.id == id), devices, groups);\n}\n\nexport function swapDevicesInRoom(room: number, devices: number[]) {\n    store.dispatch(swapDeviceOrder({roomId: room, swapDevices: devices}));\n}\n\nexport function getDevice(id: Number) : DeviceModel {    \n    return DeviceModel.fromObject(store.getState().devices.find((device => device.id == id)));\n}\n\nexport function getDeviceRoom(id: Number) : Room {\n    return store.getState().rooms.find(room => room.devices.find(device => device == id));\n}\n\nexport function setDeviceState(deviceId: number, changes: Map<string, any>) {\n    const devices = store.getState().devices;\n    const device = devices.find(({id}) => id == deviceId);\n    if(!device) {\n        //probably a group update\n        const groupDevices = devices.filter(({ingroup}) => {\n          return ingroup == deviceId;\n        });\n\n        groupDevices.forEach(device => {\n            store.dispatch(setDeviceStateAction({\n                device: device.id,\n                state: Object.fromEntries(changes)\n            }));\n        });\n\n        return;\n    }\n\n    store.dispatch(setDeviceStateAction({\n        device: deviceId,\n        state: Object.fromEntries(changes)\n    }));\n}\n\nfunction shouldDispatchUpdate(device: Device, state: State) {\n    //dry run and do nothing if nothing has changed\n    const newState = Object.assign({}, device.state, state);\n\n    // console.log('update?', JSON.stringify(newState) !== JSON.stringify(device.state));\n\n    return JSON.stringify(newState) !== JSON.stringify(device.state);\n}\n\nexport function subscribeToChanges(path: string, callback: (newVal: any, oldVal: any, path: string) => void) {\n    const w = watch(store.getState, path);\n\n    store.subscribe(w((callback)));\n}","import {html, css, LitElement, TemplateResult} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport { Ref, createRef, ref } from 'lit/directives/ref.js';\nimport Home from '../../models/home';\nimport { baseMeta } from '../../models/meta';\nimport { connect } from 'pwa-helpers';\nimport store, {setDeviceState, getDevice} from '../../state';\nimport iItemModel from '../../models/iItem';\nimport DeviceModel from '../../models/device';\nimport GroupModel from '../../models/group';\n\n@customElement('tile-base')\nexport default class Tile extends connect(store)(LitElement) {\n    protected static ignoredProperties: string[] = ['style', 'name', 'room', 'meta', 'home', 'updating', 'item', 'meta'];\n    static styles = css`\n    @import url(\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200\");\n    .icon {\n        font-family: 'Material Symbols Outlined';\n        font-weight: normal;\n        font-style: normal;\n        font-size: 24px;\n        line-height: 1;\n        letter-spacing: normal;\n        text-transform: none;\n        display: inline-block;\n        white-space: nowrap;\n        word-wrap: normal;\n        direction: ltr;\n        -webkit-font-feature-settings: 'liga';\n        -webkit-font-smoothing: antialiased;\n        font-variation-settings:\n            'FILL' 1,\n            'wght' 400,\n            'GRAD' 0,\n            'opsz' 24\n    }\n    .icon.clear {\n        font-variation-settings:\n            'FILL' 0,\n            'wght' 400,\n            'GRAD' 0,\n            'opsz' 24\n    }\n    \n    .tile {\n        background: rgb(0,0,0);\n        background: linear-gradient(270deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.05) 100%);\n        width: 100%;\n        height: 100%;\n        border-radius: var(--tile-roundness);\n        overflow: hidden;\n        color: var(--tile-text-color);\n        box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n        display: inline-block;\n        vertical-align: top;\n        flex-grow: 0;\n        flex-shrink: 1;\n        flex-basis: auto;\n        align-self: auto;\n    }\n\n    .tile .name {\n        display: inline-block;\n        font-size: var(--tile-name-size);\n    }`;\n\n    tileRef:Ref = createRef();\n\n    initilised: boolean = false;\n    receiving: boolean = false;\n\n    @property()\n    name: string;\n\n    @property()\n    room: string;\n\n    //all tiles can have a state property\n    @property()\n    state: string;\n\n    //dispatched from parent to not of external updates ocurring\n    @property({type: Boolean})\n    updating: boolean;\n\n    //allows rendering to react to size changes\n    @property()\n    style: CSSStyleDeclaration;\n\n    get item() : iItemModel {\n        return getDevice(parseInt(this.id));\n    }\n\n    get home() : Home {\n        return store.getState().home;\n    }\n\n    get meta() : baseMeta {\n        return this.item.getMeta();\n    }\n\n    render(): TemplateResult {\n        return html`<div ${ref(this.tileRef)} class=\"tile ${this.constructor.name} ${this.state}\">\n          ${this.renderInner()}\n        </div>`;\n    }\n\n    renderInner(): TemplateResult {\n        return html`<div class=\"name\">${this.name}</div>`;\n    }\n\n    getTileElement(): HTMLDivElement {\n        return this.shadowRoot.querySelector('div');\n    }\n\n    getTileSize(): number[] {\n        const element = this.getTileElement();\n        return [\n            parseInt(getComputedStyle(element).getPropertyValue('width')),\n            parseInt(getComputedStyle(element).getPropertyValue('height'))\n        ];\n    }\n\n    updated(changedProperties: Map<string, any>) {\n        const changedKeys = Array.from(changedProperties.keys()).filter(key => !(<typeof Tile> this.constructor).ignoredProperties.includes(key) && !key.startsWith('_'));\n\n        if(changedKeys.length > 0 && this.initilised && !this.receiving) {\n            const observedChanges = new Map(changedKeys.map(key => ([key, this[key]])));\n            setDeviceState(parseInt(this.id, 10), observedChanges);\n        }\n\n        this.initilised = true;\n     }\n\n    getDisplayName() {\n        if(this.room && this.name.startsWith(this.room + ' ')) {\n            if(this.name.substring(this.room.length + 1).toLowerCase().startsWith('and')) {\n                return this.name;\n            }\n\n            return this.name.substring(this.room.length + 1);\n        }\n        return this.name;\n    }\n\n    stateChanged(state) {\n        this.receiving = true;\n        const device = state.devices.find(({id}) => id == this.id);\n        let tileState;\n\n        if(!device) {\n            const group = state.groups.find(({id}) => id == this.id);\n            tileState = GroupModel.fromObject(group, state.devices).getState();\n        } else {\n            tileState = DeviceModel.fromObject(device).getState();\n        }\n        \n\n        Object.entries(tileState).forEach(([k, v]) => {\n            //console.log(this.id, 'set: ', k, v);\n            this[k] = v;\n        });\n\n        setTimeout(() => {\n            this.receiving = false;\n        }, 20);\n    }\n}","import {customElement, property} from 'lit/decorators.js';\nimport Tile from \"./tile-base\";\nimport { css, html } from 'lit';\nimport TileProxy from './tile-proxy';\nimport DeviceGrid from '../device-grid';\nimport { Ref, createRef, ref } from 'lit/directives/ref.js';\n\n@customElement('tile-editable')\nexport default class TileEditable extends Tile {\n    static ignoredProperties: string[] = [...super.ignoredProperties, 'editing', 'moving', 'resizing'];\n    static styles = [\n        Tile.styles,\n        css`\n        :host {\n            position: relative;\n        }\n\n        :host([width=\"2\"]) {\n            grid-column-end: span 2;\n        }\n\n        :host([height=\"2\"]) {\n            grid-row-end: span 2;\n        }\n\n        .edit-overlay {\n            position: absolute;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            cursor: move;\n            z-index: 999;\n            border: 1px dashed rgba(0,0,0,0.5);\n            box-sizing: border-box;\n        }\n\n        .tile.editing {\n            opacity: 0.1;\n            border: 1px dashed black;\n            box-sizing: border-box;\n        }\n\n        .resize-handle {\n            width: 15px;\n            height: 0;\n            padding-top: 10%;\n            overflow: hidden;\n            position: absolute;\n            bottom: 4px;\n            right: 4px;\n            cursor: se-resize;\n            z-index: 999;\n        }\n\n        .resize-handle:after {\n            content: \"\";\n            display: block;\n            width: 0;\n            height: 0;\n            margin-top:-500px;\n            \n            border-top: 500px solid transparent;\n            border-right: 500px solid rgba(128, 128, 128, 0.5);\n        }\n\n        .resize-handle.moving {\n            display: none;\n        }\n    `];\n\n    proxy:TileProxy;\n\n    @property({type:Boolean})\n    editing:boolean = false;\n\n    @property({type:Boolean})\n    moving:boolean = false;\n\n    @property({type:Boolean})\n    resizing:boolean = false;\n\n    @property({attribute: false})\n    onItemReorder: (index:number) => void\n\n    @property({attribute: false})\n    onItemResize: (w:number, h:number) => void\n\n    resizeHandleRef:Ref = createRef();\n\n    @property({type: Number, reflect: true})\n    width:number = 1;\n\n    @property({type: Number, reflect: true})\n    height:number = 1;\n\n    constructor() {\n        super();\n\n        this.editableMouseDown = this.editableMouseDown.bind(this);\n        this.editableMove = this.editableMove.bind(this);\n        this.editableMoveEnd = this.editableMoveEnd.bind(this);\n        \n        this.resizableMouseDown = this.resizableMouseDown.bind(this);\n        this.resiziableDrag = this.resiziableDrag.bind(this);\n        this.resiziableDragEnd = this.resiziableDragEnd.bind(this);\n\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        this.addEventListener('mousedown', this.editableMouseDown);\n    }\n\n    attachProxyToWindow(event: MouseEvent): void {\n        const [width, height] = this.getTileSize();\n        this.proxy = document.createElement('tile-proxy') as TileProxy;\n        this.proxy.width = width;\n        this.proxy.height = height;\n\n        document.body.appendChild(this.proxy);\n\n        this.proxy.setMouseOffset(event);\n    }\n\n    editableMouseDown(event: MouseEvent): void {\n        if(!this.editing || this.resizing) {\n            return;\n        }\n\n        this.tileRef.value.classList.add('editing');\n        this.attachProxyToWindow(event);\n\n        this.moving = true;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        window.addEventListener('mousemove', this.editableMove);\n        window.addEventListener('mouseup', this.editableMoveEnd);\n    }\n\n    editableMove(event:MouseEvent): void  {\n        this.proxy.setProxyPosition(event);\n        (this.parentElement.getRootNode().host as DeviceGrid).checkProxyIntersection(this.proxy, this);\n    }\n\n    editableMoveEnd(event:MouseEvent): void {\n        window.removeEventListener('mousemove', this.editableMove);\n        window.removeEventListener('mouseup', this.editableMoveEnd);\n        \n        this.moving = false;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        this.tileRef.value.classList.remove('editing');\n        document.body.removeChild(this.proxy);\n    }\n\n    resizableMouseDown(event: MouseEvent): void {\n        if(!this.editing || this.moving) {\n            return;\n        }\n\n        this.resizing = true;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        window.addEventListener('mousemove', this.resiziableDrag);\n        window.addEventListener('mouseup', this.resiziableDragEnd);\n    }\n\n    resiziableDrag(event:MouseEvent): void {\n        const rect = this.resizeHandleRef.value.getBoundingClientRect();\n\n        const dragDistanceX = event.clientX - rect.right;\n        const dragDistanceY = event.clientY - rect.bottom;\n\n        if(dragDistanceX > 100 && this.width < 2) {\n            this.width = 2;\n        } else if(dragDistanceX < -100 && this.width > 1) {\n            this.width = 1;\n        }\n\n        if(dragDistanceY > 50 && this.height < 2) {\n            this.height = 2;\n        } else if(dragDistanceY < -50 && this.height > 1) {\n            this.height = 1;\n        }\n    }\n\n    resiziableDragEnd(event:MouseEvent): void {\n        window.removeEventListener('mousemove', this.resiziableDrag);\n        window.removeEventListener('mouseup', this.resiziableDragEnd);\n\n        this.resizing = false;\n\n        event.preventDefault();\n        event.stopPropagation();\n    }\n\n    disconnectedCallback(): void {\n        this.removeEventListener('mousedown', this.editableMouseDown);\n        super.disconnectedCallback();\n    }\n\n    render() {\n        if(this.editing) {\n            return html`<div class=\"edit-overlay\">\n                <div class=\"resize-handle ${this.moving ? 'moving': ''}\" @mousedown=${this.resizableMouseDown} ${ref(this.resizeHandleRef)}></div>\n            </div>${super.render()}`;\n        }\n\n        return super.render();\n    }\n}","import {html, css} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport { Ref, createRef, ref } from 'lit/directives/ref.js';\nimport TileEditable from './tile-editable';\n\n@customElement('tile-camera')\nexport default class TileCamera extends TileEditable {\n  static styles = [\n    TileEditable.styles,\n    css`.tile {\n        position: relative;\n    }\n    \n    .tile img {\n        background: #333333;\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        z-index: -1;\n        top: 0;\n        left: 0;\n        object-fit: contain;\n    }\n\n    .tile video {\n        background: #333333;\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        z-index: -1;\n        top: 0;\n        left: 0;\n        object-fit: contain;\n    }\n\n    .tile .fill {\n      object-fit: cover;\n    }\n    \n    .tile .button {\n        background: var(--tile-button-background);\n        width: var(--tile-button-size);\n        height: var(--tile-button-size);\n        margin: 8px;\n        border-radius: 50%;\n        text-align: center;\n        display: inline-block;\n        vertical-align: middle;\n    }\n    \n    .tile .button .icon {\n        font-size: var(--tile-icon-size);\n        line-height: var(--tile-button-size)\n    }\n    \n    .tile .name {\n        display: inline-block;\n        font-size: var(--tile-name-size);\n        text-shadow: 0 0 3px rgba(0,0,0,0.5);\n    }`];\n\n  @property()\n  fill: boolean = true;\n\n  @property()\n  useImage: boolean = false;\n\n  @property()\n  image: string;\n\n  @property()\n  stream: string;\n\n  @property()\n  b64image: string;\n\n  imageRef:Ref = createRef();\n\n  imagePollInterval:Timeout = 0;\n\n  renderInner() {\n    return html`<div class=\"button\">\n        <span class=\"icon\">videocam</span>\n      </div>\n      <div class=\"name\">${this.getDisplayName()}</div>\n      ${this.renderCamera()}`;\n  }\n\n  renderCamera() {\n    if(this.useVideo()) {\n      return html`<video autoplay muted src=\"${this.stream}\" class=\"${this.fill ? 'fill': ''}\">`;\n    }\n    return html`<img ${ref(this.imageRef)} src=\"${this.parseUrl()}\" class=\"${this.fill ? 'fill': ''}\"/>`;\n  }\n\n  useVideo() {\n    return this.stream && this.stream.startsWith('http') && !this.useImage;\n  }\n\n  parseUrl() {\n    if(this.b64image) {\n      return `data:image/jpeg;base64,${this.b64image}`;\n    }\n\n    if(this.image.startsWith('<')) {\n      const img = /src=(.+?)\\s/g.exec(this.image);\n      return img[1];\n    }\n\n    return this.image;\n  }\n\n  connectedCallback() {\n    super.connectedCallback()\n\n    clearInterval(this.imagePollInterval);\n    if(!this.useVideo() && !this.b64image) {\n      this.imagePollInterval = setInterval(this.imageIntervalRefresh.bind(this), 10000);\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    clearInterval(this.imagePollInterval);\n  }\n\n  imageIntervalRefresh() {\n    const url = new URL(this.imageRef.value.src);\n    url.searchParams.set('q', new Date().getTime().toString());\n    this.imageRef.value.src = url.toString();\n  }\n}","import {html, css, LitElement} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport { Ref, createRef, ref } from 'lit/directives/ref.js';\n\n@customElement('circular-progress')\nexport default class CircularProgress extends LitElement {\n    static styles = css`\n    .progress-ring {\n  \n    }\n    \n    .progress-ring__circle {\n      transition: 0.35s stroke-dashoffset;\n      transform: rotate(-90deg);\n      transform-origin: 50% 50%;\n    }`;\n    \n    @property({type:Number})\n    size: number = 120;\n    @property({type:Number})\n    progress: number = 0;\n    @property({type:Number})\n    min: number = 0;\n    @property({type:Number})\n    max: number = 360;\n    @property({type:Number})\n    width: number = 4;\n\n    circle:Ref = createRef();\n\n    updated() {\n        if(this.circle.value) {\n            const radius = this.circle.value.r.baseVal.value;\n            const circumference = radius * 2 * Math.PI;\n\n            this.circle.value.style.strokeDasharray = `${circumference} ${circumference}`;\n            this.circle.value.style.strokeDashoffset = `${circumference}`;\n\n            const full = this.max - this.min;\n\n            const offset = circumference - (this.progress / 100 * (full / 360)) * circumference;\n            this.circle.value.style.strokeDashoffset = offset;\n\n            if (this.min != 0) {\n                this.circle.value.style.transform = `rotate(${this.min - 90}deg)`;\n            }\n        }\n    }\n\n    render() {\n        return  html`<svg\n            class=\"progress-ring\"\n            width=\"${this.size}\"\n            height=\"${this.size}\">\n            <circle\n                class=\"progress-ring__circle\"\n                stroke=\"white\"\n                stroke-width=\"${this.width}\"\n                fill=\"transparent\"\n                r=\"${this.size / 2 - this.width}\"\n                cx=\"${this.size / 2}\"\n                cy=\"${this.size / 2}\"\n                ${ref(this.circle)}/>\n        </svg>`;\n    }\n}","import {html, css} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport { hvacMeta } from '../models/meta';\nimport TileEditable from './tile-editable';\n\n@customElement('tile-temp')\nexport default class TileTemperature extends TileEditable {\n  static styles = [\n    TileEditable.styles,\n    css`\n    .tile img {\n      background: #333333;\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      z-index: -1;\n      top: 0;\n      left: 0;\n      object-fit: contain;\n    }\n    \n    .tile .button {\n      background: var(--tile-button-background);\n      width: var(--tile-button-size);\n      height: var(--tile-button-size);\n      margin: 8px;\n      border-radius: 50%;\n      text-align: center;\n      display: inline-block;\n      vertical-align: middle;\n    }\n    \n    .tile .button .icon {\n      font-size: var(--tile-icon-size);\n      line-height: var(--tile-button-size);\n    }\n    \n    .tile .name {\n      max-width: 50%;\n      vertical-align: middle;\n    }\n    \n    .tile .temp {\n      text-align: center;\n      display: inline-block;\n      width: 100%;\n      font-weight: 600;\n      margin-top: -8px;\n    }\n    \n    .tile .temp .value {\n        vertical-align: middle;\n    }\n    \n    .tile circular-progress {\n      display: none;\n    }\n    \n    :host([height=\"2\"]) .tile circular-progress {\n      display: block;\n    }\n\n    :host([height=\"2\"]) .tile .temp {\n        display: block;\n        margin-top: 55px;\n    }\n\n    .tile circular-progress {\n      position: absolute;\n      z-index: -1;\n      left: 50%;\n      top: 60%;\n      opacity: 0.75;\n      transform: translate(-50%, -50%);\n    }`];\n\n  @property({type: Number})\n  temp: number;\n\n  renderInner() {\n    return html`\n      <div class=\"button\">\n        <span class=\"icon\">thermometer</span>\n      </div>\n      <div class=\"name\">${this.getDisplayName()}</div>\n      <div class=\"temp\">\n        <span class=\"value\">${this.temp}º${this.home.tempScale}</span>\n      </div>\n      <circular-progress progress=\"${this.progressForTemp(this.temp)}\" min=\"-110\" max=\"110\" size=\"150\" width=\"6\"/>`;\n  }\n\n  progressForTemp(temp: number) {\n    const min = 5;\n    const max = 35;\n\n    if(temp > max) {\n      return 100;\n    }\n\n    if(temp < min) {\n      return 0;\n    }\n\n    return (temp - min) / (max - min) * 100\n  }\n}\n\nimport \"../circular-progress\";","import {html, css} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport { hvacMeta } from '../models/meta';\nimport TileTemperature from './tile-temp';\n\n@customElement('tile-hvac')\nexport default class TileHVAC extends TileTemperature {\n  static styles = [\n    TileTemperature.styles,\n    css`\n    .tile .temp .icon {\n        vertical-align: middle;\n        font-size: 35px;\n        margin: 0 -8px;\n    }\n    \n    .tile .temp .icon:hover {\n        color: #FFFFFF;\n        text-shadow: 0 0 5px #FFFFFF;\n        cursor: pointer;\n    }\n    \n    .tile .mode {\n      background: rgba(0, 0, 0, 0.1);\n      padding: 2px 8px;\n      display: inline-block;\n      border-radius: 3px;\n      border: 1px solid rgba(0, 0, 0, 0.2);\n      position: absolute;\n      top: 8px;\n      right: 8px;\n      font-size: 10px;\n      text-transform: uppercase;\n    }\n    \n    .tile .mode:hover {\n        background: rgba(255, 255, 255, 0.1);\n        cursor: pointer;\n    }\n    \n    .tile .state {\n      position: absolute;\n      bottom: 8px;\n      right: 8px;\n      text-align: center;\n      font-size: 11px;\n      opacity: 0.75;\n    }\n\n    :host([height=\"2\"]) .tile .temp {\n        display: block;\n        margin-top: 35px;\n    }\n\n    :host([height=\"2\"]) .tile .mode {\n        position: relative;\n        margin-top: 10px;\n        left: 50%;\n        right: auto;\n        top: auto;\n        transform: translateX(-50%);\n    }`];\n    \n  @property({attribute: false})\n  meta: hvacMeta = {heat: false, cool: false, modes: []};\n\n  @property()\n  mode: string;\n\n  renderInner() {\n    return html`\n      <div class=\"button\">\n        <span class=\"icon\">thermostat</span>\n      </div>\n      <div class=\"name\">${this.getDisplayName()}</div>\n      <div class=\"temp\">\n        <span class=\"icon left\">arrow_left</span>\n        <span class=\"value\">${this.temp}º${this.home.tempScale}</span>\n        <span class=\"icon right\">arrow_right</span>\n      </div>\n      <div class=\"state\">${this.state}</div>\n      <div class=\"mode\">${this.mode}</div>\n      <circular-progress progress=\"${this.progressForTemp(this.temp)}\" min=\"-110\" max=\"110\" size=\"150\" width=\"6\"/>`;\n  }\n}","import { property } from \"lit/decorators.js\";\nimport TileEditable from \"./tile-editable\";\n\nexport default class TileClickable extends TileEditable {\n    static ignoredProperties: string[] = [...super.ignoredProperties, 'onLongClick'];\n    boundMouseDown: any;\n    boundMouseUp: any;\n\n    constructor() {\n        super();\n        this.boundMouseDown = this._mouseDown.bind(this);\n        this.boundMouseUp = this._mouseUp.bind(this)\n        this.addEventListener('mousedown', this.boundMouseDown);\n        this.addEventListener('mouseup', this.boundMouseUp);\n\n        //for touch\n        this.addEventListener('touchstart', this.boundMouseDown);\n        this.addEventListener('touchend', this.boundMouseUp);\n    }\n\n    longClickTimeout: number;\n    longClickComplete: boolean;\n\n    @property({attribute: false})\n    onLongClick: (number) => {};\n    \n    clicked() {}\n\n    longClicked() {}\n\n    clamp(value, min, max) {\n        if(value > max) {\n            return max;\n        } else if(value < min) {\n            return min;\n        }\n        return value;\n    }\n\n    _mouseDown(event: MouseEvent|TouchEvent) {\n        this.preventMouseEmulation(event);\n        this.longClickTimeout = setTimeout(this._onLongClick.bind(this), 250);\n    }\n    \n    _mouseUp(event: MouseEvent|TouchEvent) {\n        this.preventMouseEmulation(event);\n\n        if(!this.longClickComplete) {\n          clearTimeout(this.longClickTimeout);\n          this.clicked();\n        }\n        this.longClickComplete = false;\n    }\n    \n    _onLongClick() {\n        this.longClickComplete = true;\n        if(this.onLongClick) {\n            this.onLongClick(this.id);\n        }\n        this.longClicked();\n    }\n\n    preventMouseEmulation(event:MouseEvent|TouchEvent) {\n        if(event.type.startsWith('touch')) {\n            event.preventDefault();\n        }\n    }\n}","import TileClickable from \"./tile-clickable\";\n\nexport default class TileDraggable extends TileClickable {\n    dragStartAbsolutePosition: number[];\n    dragEventHandlers: {mousemove:any, mouseup:any};\n    dragStartLevel?: number;\n    dragLevelChanging: boolean = false;\n    \n    dragStart() {\n        throw new Error('dragStart must be overridden for a Draggable Component Control');\n    }\n\n    dragging(change: number) {\n\n    }\n\n    dragEnd(change: number) {\n        throw new Error('dragEnd must be overridden for a Draggable Component Control');\n    }\n\n    clamp(value, min, max) {\n        if(value > max) {\n            return max;\n        } else if(value < min) {\n            return min;\n        }\n        return value;\n    }\n\n    _mouseDown(event: MouseEvent|TouchEvent) {\n        this.preventMouseEmulation(event);\n        event.preventDefault();\n\n        if(event instanceof TouchEvent && event.changedTouches) {\n          this.dragStartAbsolutePosition = [event.changedTouches[0].clientX, event.changedTouches[0].clientY]\n        } else if(event instanceof MouseEvent) {\n          this.dragStartAbsolutePosition = [event.clientX, event.clientY];\n        }\n        \n        this.dragEventHandlers = {\n          mousemove: this._onDrag.bind(this),\n          mouseup: this._onDragEnd.bind(this)\n        };\n    \n        window.addEventListener('mousemove', this.dragEventHandlers.mousemove);\n        window.addEventListener('mouseup', this.dragEventHandlers.mouseup);\n\n        //for touch\n        window.addEventListener('touchmove', this.dragEventHandlers.mousemove);\n        window.addEventListener('touchend', this.dragEventHandlers.mouseup);\n\n        this.dragStart();\n\n        super._mouseDown(event);\n      }\n\n      _getPercentageFromEvent(event: MouseEvent|TouchEvent): number {\n        const width = this.getTileSize()[0];\n\n        let delta;\n        if(event instanceof TouchEvent && event.changedTouches) {\n          delta = event.changedTouches[0].clientX - this.dragStartAbsolutePosition[0];\n        } else if(event instanceof MouseEvent) {\n          delta = event.clientX - this.dragStartAbsolutePosition[0];\n        }\n        this.dragLevelChanging = true;\n    \n        return delta / width;\n      }\n    \n      _onDrag(event: MouseEvent|TouchEvent) {\n\n        this.preventMouseEmulation(event);\n\n        if(event instanceof TouchEvent && event.changedTouches) { //fix dragging bug on mobile\n          let delta = event.changedTouches[0].clientX - this.dragStartAbsolutePosition[0];\n\n          if(delta < 10 || delta > -10 ) {\n            return;\n          }\n        }\n\n        this.dragging(this._getPercentageFromEvent(event));\n        \n        this.longClickComplete = false;\n        clearTimeout(this.longClickTimeout);\n      }\n    \n      _onDragEnd(event: MouseEvent|TouchEvent) {\n        this.preventMouseEmulation(event);\n        window.removeEventListener('mousemove', this.dragEventHandlers.mousemove);\n        window.removeEventListener('mouseup', this.dragEventHandlers.mouseup);\n\n        //for touch\n        window.removeEventListener('touchmove', this.dragEventHandlers.mousemove);\n        window.removeEventListener('touchend', this.dragEventHandlers.mouseup);\n        if(this.dragLevelChanging) {\n          this._dragEnded(this._getPercentageFromEvent(event));\n        }\n        this.longClickComplete = false;\n      }\n    \n      _mouseUp(event: MouseEvent|TouchEvent) {\n        this.preventMouseEmulation(event);\n        if(this.dragLevelChanging) {\n          event.preventDefault();\n          this.longClickComplete = false;\n        } else  {\n            super._mouseUp(event);\n        }\n      }\n    \n      _dragEnded(change: number) {\n        this.dragLevelChanging = false;\n        this.dragEnd(change);\n      }\n}","import {html, css} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport TileDraggable from './tile-draggable';\nimport { lightMeta } from '../../models/meta';\n\n@customElement('tile-light')\nexport default class TileLight extends TileDraggable {\n  static ignoredProperties: string[] = [...super.ignoredProperties];\n  static styles = [\n    TileDraggable.styles,\n    css`.tile {\n        position: relative;\n        transition: all 0.3s cubic-bezier(.25,.8,.25,1);\n    }\n\n    .tile:hover {\n        box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n        background: rgba(255, 255, 255, 0.1);\n        color: var(--tile-text-inverse);\n        cursor: pointer;\n    }\n\n    .tile .progress {\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        background: #ffb500;\n        z-index: -1;\n        opacity: 0.75\n    }\n\n    .tile .button {\n        background: var(--tile-button-background);\n        width: var(--tile-button-size);\n        height: var(--tile-button-size);\n        margin: 8px;\n        border-radius: 50%;\n        text-align: center;\n        display: inline-block;\n        vertical-align: middle;\n    }\n\n    .tile .button .icon {\n        font-size: var(--tile-icon-size);\n        line-height: var(--tile-button-size)\n    }\n\n    .tile .level {\n        position: absolute;\n        bottom: 8px;\n        right: 8px;\n        font-size: 11px;\n        opacity: 0.75;\n    }`];\n    \n  @property({attribute: false})\n  meta: lightMeta = {color: false, ct: false, level: false};\n\n  @property({type: Number})\n  level: number;\n\n  @property({type: Number})\n  _localLevel: number;\n\n  @property()\n  mode: string;\n\n  @property({type: Number})\n  hue: number;\n\n  @property({type: Number})\n  saturation: number;\n\n  @property({type: Number})\n  ct: number;\n\n  dragStartLevel: number;\n\n  renderProgress() {\n    if(this.state == 'on') {\n      return html`<div class=\"progress\" style=\"right: ${100 - this._localLevel}%; background: ${this.getBackgroundColor()}\"></div>`\n    }\n\n    return null;\n  }\n\n  renderInner() {\n    return html`\n      <div class=\"button\">\n        <span class=\"icon ${this.state != 'on' ? 'clear' : ''}\">lightbulb</span>\n      </div>\n      ${this.renderProgress()}\n      <div class=\"name\">${this.getDisplayName()}</div>\n      <div class=\"level\">${this.state == 'on' ? this._localLevel + '%' : 'off'}</div>`;\n  }\n\n  dragStart() {\n    if(this.state !== 'on') {\n      return;\n    }\n    this.dragStartLevel = this.level;\n  }\n\n  dragging(change: number) {\n    if(this.state !== 'on') {\n      return;\n    }\n    this._localLevel = this.clamp(Math.round(this.dragStartLevel + (change * 100)), 0, 100);\n  }\n\n  dragEnd(change: number) {\n    if(this.state !== 'on') {\n      return;\n    }\n    const newLevel = this.clamp(Math.round(this.dragStartLevel + (change * 100)), 0, 100);\n    this.level = newLevel;\n  }\n\n  updated(changedProperties: Map<string, any>) {\n    super.updated(changedProperties);\n    if(changedProperties.has('level')) {\n      this._localLevel = this.level;\n    }\n  }\n\n  clicked() {\n    this.state = this.state == 'on' ? 'off' : 'on';\n  }\n\n  getBackgroundColor() {\n    if(this.meta.color && this.mode == \"RGB\") {\n      return `hsl(${this.hue}, ${this.saturation}%, ${this.level / 2}%)`;\n    } else if(this.meta.ct) {\n      const {r,g,b} = TileLight.colorTemperatureToRGB(this.ct)\n      return `rgb(${r}, ${g}, ${b})`\n    } else {\n      return '#ffb500';\n    }\n  }\n\n  static colorTemperatureToRGB(kelvin:number){\n    let temp = kelvin / 100;\n    let red, green, blue;\n\n    if( temp <= 66 ){ \n        red = 255; \n        green = temp;\n        green = 99.4708025861 * Math.log(green) - 161.1195681661;\n        if( temp <= 19) {\n            blue = 0;\n        } else {\n            blue = temp-10;\n            blue = 138.5177312231 * Math.log(blue) - 305.0447927307;\n        }\n\n    } else {\n        red = temp - 60;\n        red = 329.698727446 * Math.pow(red, -0.1332047592);\n        green = temp - 60;\n        green = 288.1221695283 * Math.pow(green, -0.0755148492 );\n        blue = 255;\n    }\n\n    return {\n        r : this.clamp(red,   0, 255),\n        g : this.clamp(green, 0, 255),\n        b : this.clamp(blue,  0, 255)\n    }\n  }\n\n  static clamp(x:number, min:number, max:number) {\n    if(x<min){ return min; }\n    if(x>max){ return max; }\n\n    return x;\n  }\n}","import {html, css} from 'lit';\nimport {customElement} from 'lit/decorators.js';\nimport TileClickable from './tile-clickable';\n\n@customElement('tile-lock')\nexport default class TileLock extends TileClickable {\n  static styles = [\n    TileClickable.styles,\n    css`.tile {\n      position: relative;\n      transition: all 0.3s cubic-bezier(.25,.8,.25,1);\n    }\n    \n    .tile:hover {\n        box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n        background: rgba(255, 255, 255, 0.1);\n        color: var(--tile-text-inverse);\n    }\n    \n    .tile .button {\n        background: var(--tile-button-background);\n        width: var(--tile-button-size);\n        height: var(--tile-button-size);\n        margin: 8px;\n        border-radius: 50%;\n        text-align: center;\n        display: inline-block;\n        vertical-align: middle;\n    }\n    \n    .tile .button .icon {\n        font-size: var(--tile-icon-size);\n        line-height: var(--tile-button-size)\n    }\n    \n    .tile.unlocked {\n        background: rgba(var(--tile-default-active-color), 0.75);\n    }\n    \n    .tile.unlocked:hover {\n        background: rgba(var(--tile-default-active-color), 1);\n    }\n    \n    .tile .name {\n        display: inline-block;\n        font-size: var(--tile-name-size);\n    }\n    \n    .tile .state {\n        font-size: 10px;\n        margin: -14px 0 0 45px;\n        opacity: 0.75;\n    }`];\n\n  clicked() {\n    this.state = this.state == 'locked' ? 'unlocked' : 'locked';\n  }\n\n  renderInner() {\n    return html`\n      <div class=\"button\">\n        <span class=\"icon\">${this.getIcon()}</span>\n      </div>\n      <div class=\"name\">${this.getDisplayName()}</div>\n      <div class=\"state\">${this.state}</div>`;\n  }\n\n  getIcon() {\n    return this.state == 'locked' ? 'door_front' : 'door_open'\n  }\n}","import {html, css} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport TileEditable from './tile-editable';\nimport { mediaData } from '../../models/state';\n\n@customElement('tile-media')\nexport default class TileMedia extends TileEditable {\n  static styles = [\n    TileEditable.styles,\n    css`.tile {\n        position: relative;\n        background: transparent;\n        color: var(--tile-text-color);\n    }\n\n    .tile .defaultBackground {\n      position:absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      background: linear-gradient(270deg, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.05) 100%);\n    }\n    \n    .tile .background {\n        position:absolute;\n        width:200%;\n        height:200%;\n        z-index: -1; /* should be calculated from image */\n        opacity: 0.75;\n        left: -50%;\n        right: -50%;\n        top: -50%;\n        bottom: -50%;\n        filter: blur(50px) brightness(0.5) contrast(2);\n    }\n    \n    .tile .art {\n        z-index: -2;\n        position: absolute;\n        left: 0;\n        right: 0;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        bottom: 0;\n        object-fit: cover;\n    }\n    \n    .tile .button {\n        background: var(--tile-button-background);\n        width: var(--tile-button-size);\n        height: var(--tile-button-size);\n        margin: 8px;\n        border-radius: 50%;\n        text-align: center;\n        display: inline-block;\n        vertical-align: middle;\n    }\n    \n    .tile .button img {\n        width: 20px;\n        height: 20px;\n        object-fit: contain;\n        filter: invert(100%) sepia(0%) saturate(0%) hue-rotate(26deg) brightness(99%) contrast(103%);\n        display: inline-block;\n        vertical-align: middle;\n        padding: 2.5px;\n    }\n    \n    .tile .name {\n        display: inline-block;\n        font-size: var(--tile-name-size);\n    }\n    \n    .tile .info {\n        padding: 8px;\n        font-size: 12px;\n    }\n\n    .tile .info .title {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n    \n    .tile .info .subtitle {\n        font-size: 11px;\n        opacity: 0.8;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n    \n    .tile .controls {\n        position: absolute;\n        top: calc((var(--tile-height) / 2) - 25px);\n        right: 8px;\n    }\n\n    :host([height=\"2\"]) .tile .controls {\n      position: static;\n      text-align: center;\n      margin-bottom: 16px;\n    }\n\n    :host([width=\"2\"]) .tile .controls {\n      top: calc((var(--tile-height) / 2) - 10px);\n    }\n\n    :host([width=\"2\"]) .tile .info {\n        margin-top: -14px;\n    }\n    \n    .tile .controls .icon:hover {\n        color: #FFFFFF;\n        text-shadow: 0 0 5px #FFFFFF;\n        cursor: pointer;\n    }\n\n    .seek-container {\n      display: none;\n      position: absolute;\n      bottom: 8px;\n      width: 100%;\n    }\n\n    :host([height=\"2\"]) .seek-container, :host([width=\"2\"]) .seek-container {\n      display: block;\n    }\n    \n    .seek-bar {\n      -webkit-appearance: none;\n      width: calc(100% - 16px);\n      background: transparent;\n      margin: 0 8px;\n    }\n\n    .seek-bar::-webkit-slider-thumb {\n      -webkit-appearance: none;\n    }\n\n    .seek-bar:focus {\n      outline: none; /* Removes the blue border. You should probably do some kind of focus styling for accessibility reasons though. */\n    }\n\n    .seek-bar::-ms-track {\n      width: 100%;\n      cursor: pointer;\n\n      /* Hides the slider so custom styles can be added */\n      background: transparent; \n      border-color: transparent;\n      color: transparent;\n    }\n\n    .seek-container:hover .seek-bar::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      height: 16px;\n      width: 16px;\n      border-radius: 50%;\n      background: rgba(255, 255, 255, 0.85);\n      cursor: pointer;\n      margin-top: -6px; /* You need to specify a margin in Chrome, but in Firefox and IE it is automatic */\n    }\n\n    /* All the same stuff for Firefox */\n    .seek-container:hover .seek-bar:hover::-moz-range-thumb {\n      height: 16px;\n      width: 16px;\n      border-radius: 50%;\n      background: rgba(255, 255, 255, 0.85);\n      cursor: pointer;\n    }\n\n    .seek-bar::-webkit-slider-runnable-track {\n      width: 100%;\n      height: 3px;\n      cursor: pointer;\n      background: rgba(255, 255, 255, 0.5);\n    }\n\n    .seek-bar:focus::-webkit-slider-runnable-track {\n      background: rgba(255, 255, 255, 0.7);\n    }\n\n    .seek-bar::-moz-range-track {\n      width: 100%;\n      height: 3px;\n      cursor: pointer;\n      background: rgba(255, 255, 255, 0.5);\n    }\n\n    .seek-bar::-ms-track {\n      width: 100%;\n      height: 3px;\n      cursor: pointer;\n      background: transparent;\n      border-color: transparent;\n      border-width: 16px 0;\n      color: transparent;\n    }\n    .seek-bar::-ms-fill-lower {\n      background: rgba(255, 255, 255, 0.5);\n    }\n    .seek-bar:focus::-ms-fill-lower {\n      background: rgba(255, 255, 255, 0.7);\n    }\n    .seek-bar::-ms-fill-upper {\n      background: rgba(255, 255, 255, 0.5);\n    }\n    .seek-bar:focus::-ms-fill-upper {\n      background: rgba(255, 255, 255, 0.7);\n    }`];\n\n  @property({attribute: false})\n  data: mediaData;\n\n  renderBackground() {\n    if(!this.data?.image) {\n      return html`<div class=\"defaultBackground\"></div`;\n    }\n    return html`<img class=\"background\" src=\"${this.data.image}\" referrerpolicy=\"no-referrer\"></img>\n      <img\n        class=\"art\"\n        src=\"${this.data.image}\"\n        referrerpolicy=\"no-referrer\"\n      />`;\n  }\n\n  renderInner() {\n    return html`\n      ${this.renderBackground()}\n      <div class=\"button\">\n        <img\n          src=\"${this.getIcon(this.data?.app)}\"\n        />\n      </div>\n      <div class=\"name\">${this.getDisplayName()}</div>\n      <div class=\"controls playing\">\n        <span class=\"icon back-btn\"> fast_rewind </span>\n        <span class=\"icon play-pause-btn ${this.state == 'playing' ? \"\" : \"material-symbols-outlined\"}\" @click=${this.toggleState}>\n          ${this.state == 'playing' ? 'pause' : 'play_arrow'}\n        </span>\n        <span class=\"icon next-btn\"> fast_forward </span>\n      </div>\n      <div class=\"info\">\n        <div class=\"title\">${this.data?.title}</div>\n        <div class=\"subtitle\">${this.data?.artist}</div>\n      </div>\n      <div class=\"seek-container\">\n        <input type=\"range\" class=\"seek-bar\"/>\n      </div>`;\n  }\n\n  toggleState() {\n    if(this.state == 'playing') {\n      this.state = 'paused'\n    } else if(this.state == 'paused') {\n      this.state = 'playing'\n    }\n  }\n\n  getIcon(app: string) {\n    switch(app) {\n      case \"YouTube\":\n        return \"https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_%282017%29.svg\"\n      case \"Disney+\":\n        return \"https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg\"\n      case \"Netflix\":\n        return \"https://upload.wikimedia.org/wikipedia/commons/0/0c/Netflix_2015_N_logo.svg\"\n      case \"Prime Video\":\n        return \"https://upload.wikimedia.org/wikipedia/commons/d/de/Amazon_icon.png\"\n      case \"BBC iPlayer\":\n        return \"https://upload.wikimedia.org/wikipedia/commons/3/39/BBC_iPlayer_2021_%28symbol%29.svg\";\n      case \"All 4\":\n        return \"https://upload.wikimedia.org/wikipedia/commons/0/0e/Channel_4_logo_2015.svg\";\n      case \"ITV Player\":\n        return \"https://en.wikipedia.org/wiki/ITV_plc#/media/File:ITV_logo_2013.svg\";\n    }\n    return \"https://upload.wikimedia.org/wikipedia/commons/7/7b/Octicons-playback-play.svg\";\n  }\n}","import {html, css} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport TileClickable from './tile-clickable';\n\n@customElement('tile-switch')\nexport default class TileSwitch extends TileClickable {\n  static styles = [\n    TileClickable.styles,\n    css`.tile {\n        position: relative;\n        transition: all 0.3s cubic-bezier(.25,.8,.25,1);\n    }\n    \n    .tile:hover {\n        box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n        background: rgba(255, 255, 255, 0.1);\n        color: var(--tile-text-inverse);\n        cursor: pointer;\n    }\n    \n    .tile.on {\n        background: rgba(var(--tile-default-active-color), 0.75);\n    }\n    \n    .tile.on:hover {\n        background: rgba(var(--tile-default-active-color), 1);\n    }\n    \n    .tile .button {\n        background: var(--tile-button-background);\n        width: var(--tile-button-size);\n        height: var(--tile-button-size);\n        margin: 8px;\n        border-radius: 50%;\n        text-align: center;\n        display: inline-block;\n        vertical-align: middle;\n    }\n    \n    .tile .button .icon {\n        font-size: var(--tile-icon-size);\n        line-height: var(--tile-button-size)\n    }\n    \n    .tile.on .icon.fan {\n        animation: spin-animation 3s infinite;\n        animation-timing-function: linear;\n    }\n    \n    .tile.on .icon.pump {\n        animation: pump-animation 0.5s infinite;\n    }\n\n    .tile.off .icon.light {\n      font-variation-settings:\n            'FILL' 0,\n            'wght' 400,\n            'GRAD' 0,\n            'opsz' 24;\n    }\n\n    .tile .state {\n        position: absolute;\n        bottom: 8px;\n        right: 8px;\n        font-size: 11px;\n        opacity: 0.75;\n    }\n    \n    @keyframes pump-animation {\n        0% {\n          transform: scale(0.9);\n        }\n        100% {\n          transform: rotate(1);\n        }\n    }\n    \n    @keyframes spin-animation {\n        0% {\n            transform: rotate(0deg);\n        }\n    \n        100% {\n            transform: rotate(360deg);\n        }\n    }`];\n\n  @property()\n  icon: string = 'switch';\n\n  clicked() {\n    this.state = this.state == 'on' ? 'off' : 'on';\n  }\n\n  renderInner() {\n    return html`\n      <div class=\"button\">\n        <span class=\"icon ${this.icon}\">${this.getIcon()}</span>\n      </div>\n      <div class=\"name\">${this.getDisplayName()}</div>\n      <div class=\"state\">${this.state}</div>`;\n  }\n\n  getIcon() {\n    switch(this.icon) {\n      case \"light\":\n        return 'lightbulb';\n      case \"fan\":\n        return 'mode_fan';\n      case \"pump\":\n        return 'water_pump';\n    }\n\n    return this.state == 'on' ? 'toggle_on' : 'toggle_off'\n  }\n}","import {html, css} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport TileDraggable from './tile-draggable';\nimport {  } from '../../models/meta';\n\n@customElement('tile-window')\nexport default class TileWindow extends TileDraggable {\n  static ignoredProperties: string[] = [...super.ignoredProperties];\n  static styles = [\n    TileDraggable.styles,\n    css`.tile {\n        position: relative;\n        transition: all 0.3s cubic-bezier(.25,.8,.25,1);\n    }\n\n    .tile:hover {\n        box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n        background: rgba(255, 255, 255, 0.1);\n        color: var(--tile-text-inverse);\n        cursor: pointer;\n    }\n\n    .tile .progress {\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        background: #ffb500;\n        z-index: -1;\n        opacity: 0.75\n    }\n\n    .tile .button {\n        background: var(--tile-button-background);\n        width: var(--tile-button-size);\n        height: var(--tile-button-size);\n        margin: 8px;\n        border-radius: 50%;\n        text-align: center;\n        display: inline-block;\n        vertical-align: middle;\n    }\n\n    .tile .button .icon {\n        font-size: var(--tile-icon-size);\n        line-height: var(--tile-button-size)\n    }\n\n    .tile .level {\n        position: absolute;\n        bottom: 8px;\n        right: 8px;\n        font-size: 11px;\n        opacity: 0.75;\n    }`];\n\n  @property({type: Number})\n  position: number;\n\n  @property({type: Number})\n  _localLevel: number;\n\n  dragStartLevel: number;\n\n  renderProgress() {\n    return html`<div class=\"progress\" style=\"right: ${100 - this._localLevel}%;\"></div>`\n  }\n\n  renderInner() {\n    return html`\n      <div class=\"button\">\n        <span class=\"icon ${this.state != 'on' ? 'clear' : ''}\">window_closed</span>\n      </div>\n      ${this.renderProgress()}\n      <div class=\"name\">${this.getDisplayName()}</div>\n      <div class=\"level\">${this._localLevel}%</div>`;\n  }\n\n  dragStart() {\n    this.dragStartLevel = this._localLevel;\n  }\n\n  dragging(change: number) {\n    this._localLevel = this.clamp(Math.round(this.dragStartLevel + (change * 100)), 0, 100);\n  }\n\n  dragEnd(change: number) {\n    const newLevel = this.clamp(Math.round(this.dragStartLevel + (change * 100)), 0, 100);\n    this.position = newLevel;\n  }\n\n  updated(changedProperties: Map<string, any>) {\n    super.updated(changedProperties);\n    if(changedProperties.has('position')) {\n      this._localLevel = this.position;\n    }\n  }\n\n  static clamp(x:number, min:number, max:number) {\n    if(x<min){ return min; }\n    if(x>max){ return max; }\n\n    return x;\n  }\n}","import { LitElement, css, html } from \"lit\";\nimport {customElement, property} from 'lit/decorators.js';\nimport { Ref, createRef, ref } from 'lit/directives/ref.js';\n\n\n@customElement('tile-proxy')\nexport default class TileProxy extends LitElement {\n    static styles = css`\n        .proxy {\n            position: absolute;\n            background: rgba(128, 128, 128, 0.5);\n            border-radius: var(--tile-roundness);\n            border: 1px dashed rgba(0,0,0,0.3);\n            box-sizing: border-box;\n        }`\n\n    @property({type:Number})\n    width:number;\n\n    @property({type:Number})\n    height:number;\n\n    private offsetX:number;\n    private offsetY:number;\n\n    proxyRef:Ref = createRef();\n\n\n    render() {\n        return html`<div ${ref(this.proxyRef)} class=\"proxy\" style=\"width: ${this.width}px; height: ${this.height}px;\" draggable=\"true\"></div>`\n    }\n\n    setProxyPosition(event:MouseEvent) {\n        if(this.proxyRef.value) {\n            (this.proxyRef.value as HTMLDivElement).style.top = (event.pageY - this.offsetY) + 'px';\n            (this.proxyRef.value as HTMLDivElement).style.left = (event.pageX - this.offsetX) + 'px';\n        }\n    }\n\n    setMouseOffset(event:MouseEvent) {\n        this.offsetX = event.offsetX;\n        this.offsetY = event.offsetY;\n        \n        this.setProxyPosition(event);\n    }\n\n    intersection(el:Element) {        \n        var rectA = el.getBoundingClientRect();\n        var rectB = this.proxyRef.value?.getBoundingClientRect();\n\n        const x_overlap = Math.max(0, Math.min(rectA.right, rectB.right) - Math.max(rectA.left, rectB.left)) / (rectA.right - rectA.left);\n        const y_overlap = Math.max(0, Math.min(rectA.bottom, rectB.bottom) - Math.max(rectA.top, rectB.top)) / (rectA.bottom - rectA.top);\n\n        return x_overlap * y_overlap;\n    }\n}","import { ElementPart, Part } from 'lit';\nimport { nothing } from 'lit/html.js';\nimport { directive } from 'lit/directive.js';\nimport { AsyncDirective } from 'lit/async-directive.js';\n\ntype EventListenerWithOptions = EventListenerOrEventListenerObject &\n    Partial<AddEventListenerOptions>;\n\n\n/**\n * Usage:\n *    import { html, render } from 'lit';\n *    import { spreadProps } from '@open-wc/lit-helpers';\n *\n *    render(\n *      html`\n *        <div\n *          ${spreadProps({\n *              prop1: 'prop1',\n *              prop2: ['Prop', '2'],\n *              prop3: {\n *                  prop: 3,\n *              }\n *          })}\n *        ></div>\n *      `,\n *      document.body,\n *    );\n */\nexport class SpreadPropsDirective extends AsyncDirective {\n    host!: EventTarget | object | Element;\n    element!: Element;\n    prevData: { [key: string]: unknown } = {};\n\n    render(_spreadData: { [key: string]: unknown }) {\n        return nothing;\n    }\n    update(part: Part, [spreadData]: Parameters<this['render']>) {\n        if (this.element !== (part as ElementPart).element) {\n            this.element = (part as ElementPart).element;\n        }\n        this.host = part.options?.host || this.element;\n        this.apply(spreadData);\n        this.groom(spreadData);\n        this.prevData = { ...spreadData };\n    }\n\n    apply(data: { [key: string]: unknown }) {\n        if (!data) return;\n        const { prevData, element } = this;\n        for (const key in data) {\n            const value = data[key];\n            if (value === prevData[key]) {\n                continue;\n            }\n            // @ts-ignore\n            element[key] = value;\n        }\n    }\n\n    groom(data: { [key: string]: unknown }) {\n        const { prevData, element } = this;\n        if (!prevData) return;\n        for (const key in prevData) {\n            if (!data || (!(key in data) && element[key] === prevData[key])) {\n                // @ts-ignore\n                element[key] = undefined;\n            }\n        }\n    }\n}\n\nexport const spreadProps = directive(SpreadPropsDirective);\n\n/**\n * Usage:\n *    import { html, render } from 'lit';\n *    import { spreadEvents } from '@open-wc/lit-helpers';\n *\n *    render(\n *      html`\n *        <div\n *          ${spreadEvents({\n *            '@my-event': () => console.log('my-event fired'),\n *            '@my-other-event': () => console.log('my-other-event fired'),\n *            '@my-additional-event':\n *              () => console.log('my-additional-event fired'),\n *          })}\n *        ></div>\n *      `,\n *      document.body,\n *    );\n */\nexport class SpreadEventsDirective extends SpreadPropsDirective {\n    eventData: { [key: string]: unknown } = {};\n\n    apply(data: { [key: string]: unknown }) {\n        if (!data) return;\n        for (const key in data) {\n            const value = data[key];\n            if (value === this.eventData[key]) {\n                // do nothing if the same value is being applied again.\n                continue;\n            }\n            this.applyEvent(key, value as EventListenerWithOptions);\n        }\n    }\n\n    applyEvent(eventName: string, eventValue: EventListenerWithOptions) {\n        const { prevData, element } = this;\n        this.eventData[eventName] = eventValue;\n        const prevHandler = prevData[eventName];\n        if (prevHandler) {\n            element.removeEventListener(eventName, this, eventValue);\n        }\n        element.addEventListener(eventName, this, eventValue);\n    }\n\n    groom(data: { [key: string]: unknown }) {\n        const { prevData, element } = this;\n        if (!prevData) return;\n        for (const key in prevData) {\n            if (!data || (!(key in data) && element[key] === prevData[key])) {\n                this.groomEvent(key, prevData[key] as EventListenerWithOptions)\n            }\n        }\n    }\n\n    groomEvent(eventName: string, eventValue: EventListenerWithOptions) {\n        const { element } = this;\n        delete this.eventData[eventName];\n        element.removeEventListener(eventName, this, eventValue);\n    }\n\n    handleEvent(event: Event) {\n        const value: Function | EventListenerObject = this.eventData[\n            event.type\n        ] as Function | EventListenerObject;\n        if (typeof value === 'function') {\n            (value as Function).call(this.host, event);\n        } else {\n            (value as EventListenerObject).handleEvent(event);\n        }\n    }\n\n    disconnected() {\n        const { eventData, element } = this;\n        for (const key in eventData) {\n            // event listener\n            const name = key.slice(1);\n            const value = eventData[key] as EventListenerWithOptions;\n            element.removeEventListener(name, this, value);\n        }\n    }\n\n    reconnected() {\n        const { eventData, element } = this;\n        for (const key in eventData) {\n            // event listener\n            const name = key.slice(1);\n            const value = eventData[key] as EventListenerWithOptions;\n            element.addEventListener(name, this, value);\n        }\n    }\n}\n\nexport const spreadEvents = directive(SpreadEventsDirective);\n\n/**\n * Usage:\n *    import { html, render } from 'lit';\n *    import { spread } from '@open-wc/lit-helpers';\n *\n *    render(\n *      html`\n *        <div\n *          ${spread({\n *            'my-attribute': 'foo',\n *            '?my-boolean-attribute': true,\n *            '.myProperty': { foo: 'bar' },\n *            '@my-event': () => console.log('my-event fired'),\n *          })}\n *        ></div>\n *      `,\n *      document.body,\n *    );\n */\nexport class SpreadDirective extends SpreadEventsDirective {\n    apply(data: { [key: string]: unknown }) {\n        if (!data) return;\n        const { prevData, element } = this;\n        for (const key in data) {\n            const value = data[key];\n            if (value === prevData[key]) {\n                continue;\n            }\n            const name = key.slice(1);\n            switch (key[0]) {\n                case '@': // event listener\n                    this.eventData[name] = value;\n                    this.applyEvent(name, value as EventListenerWithOptions);\n                    break;\n                case '.': // property\n                    // @ts-ignore\n                    element[name] = value;\n                    break;\n                case '?': // boolean attribute\n                    if (value) {\n                        element.setAttribute(name, '');\n                    } else {\n                        element.removeAttribute(name);\n                    }\n                    break;\n                default:\n                    // standard attribute\n                    if (value != null) {\n                        element.setAttribute(key, String(value));\n                    } else {\n                        element.removeAttribute(key);\n                    }\n                    break;\n            }\n        }\n    }\n\n    groom(data: { [key: string]: unknown }) {\n        const { prevData, element } = this;\n        if (!prevData) return;\n        for (const key in prevData) {\n            const name = key.slice(1);\n            if (!data || (!(key in data) && element[name] === prevData[key])) {\n                switch (key[0]) {\n                    case '@': // event listener\n                        this.groomEvent(name, prevData[key] as EventListenerWithOptions)\n                        break;\n                    case '.': // property\n                        // @ts-ignore\n                        element[name] = undefined;\n                        break;\n                    case '?': // boolean attribute\n                        element.removeAttribute(name);\n                        break;\n                    default:\n                        // standard attribute\n                        element.removeAttribute(key);\n                        break;\n                }\n            }\n        }\n    }\n}\n\nexport const spread = directive(SpreadDirective);","import {html, css, LitElement, TemplateResult} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport {repeat} from 'lit/directives/repeat.js';\nimport { spreadProps } from '../component-utils';\nimport TileProxy from './tiles/tile-proxy';\nimport Tile from './tiles/tile-base';\nimport iItemModel, {iItem} from '../models/iItem';\n\nimport { connect } from 'pwa-helpers';\nimport store, {getRoom, swapDevicesInRoom} from '../state';\n\n@customElement('device-grid')\nexport default class DeviceGrid extends connect(store)(LitElement) {\n    static styles = css`.title {\n        color: rgba(255, 255, 255, 0.4);\n        font-weight: 100;\n        font-size: 30px;\n        margin: var(--tile-gap);\n    }\n    \n    .canvas {\n        width: 100%;\n        gap: var(--tile-gap);\n        display: grid;\n        margin: 0 auto;\n        grid-template-columns: repeat(auto-fill, var(--tile-width));\n        grid-auto-rows: var(--tile-height);\n        justify-content: center;\n        box-sizing: border-box;\n    }`\n\n    private debounceTimeout: Node.Timeout;\n\n    @property({type: Number, attribute: 'grid-id'})\n    gridId?: number;\n\n    @property()\n    room?: string;\n\n    @property({attribute: false})\n    onLongClickItem?: (device: iItem) => void;\n\n    @property({attribute: false})\n    onOrderChange: (roomId: number, order: number[]) => void\n\n    @property({type:Boolean})\n    editing:boolean;\n\n    renderTile(item:iItemModel) : TemplateResult {\n        switch(item.type) {\n            case \"media\":\n                return html`<tile-media ?editing=${this.editing} id=\"${item.id}\" name=\"${item.label}\" room=\"${this.room}\" .onLongClick=${this.onLongClickItem?.bind(this, item)} ${spreadProps(item.getState())} ${spreadProps(item.getPrefs())}/>`;\n            case \"light\":\n                return html`<tile-light ?editing=${this.editing} id=\"${item.id}\" name=\"${item.label}\" room=\"${this.room}\" .onLongClick=${this.onLongClickItem?.bind(this, item)} ${spreadProps(item.getState())} ${spreadProps(item.getPrefs())}/>`;\n            case \"camera\":\n                return html`<tile-camera ?editing=${this.editing} id=\"${item.id}\" name=\"${item.label}\" room=\"${this.room}\" .onLongClick=${this.onLongClickItem?.bind(this, item)} ${spreadProps(item.getState())} ${spreadProps(item.getPrefs())}/>`;\n            case \"hvac\":\n                return html`<tile-hvac ?editing=${this.editing} id=\"${item.id}\" name=\"${item.label}\" room=\"${this.room}\" .onLongClick=${this.onLongClickItem?.bind(this, item)} ${spreadProps(item.getState())} ${spreadProps(item.getPrefs())}/>`;\n            case \"temp\":\n                return html`<tile-temp ?editing=${this.editing} id=\"${item.id}\" name=\"${item.label}\" room=\"${this.room}\" .onLongClick=${this.onLongClickItem?.bind(this, item)} ${spreadProps(item.getState())} ${spreadProps(item.getPrefs())}/>`;\n            case \"lock\":\n                return html`<tile-lock ?editing=${this.editing} id=\"${item.id}\" name=\"${item.label}\" room=\"${this.room}\" .onLongClick=${this.onLongClickItem?.bind(this, item)} ${spreadProps(item.getState())} ${spreadProps(item.getPrefs())}/>`;\n            case \"window\":\n                return html`<tile-window ?editing=${this.editing} id=\"${item.id}\" name=\"${item.label}\" room=\"${this.room}\" .onLongClick=${this.onLongClickItem?.bind(this, item)} ${spreadProps(item.getState())} ${spreadProps(item.getPrefs())}/>`;\n            case \"switch\":\n                return html`<tile-switch ?editing=${this.editing} id=\"${item.id}\" name=\"${item.label}\" room=\"${this.room}\" .onLongClick=${this.onLongClickItem?.bind(this, item)} ${spreadProps(item.getState())} ${spreadProps(item.getPrefs())}/>`;\n            default:\n                return html`<tile-editable ?editing=${this.editing} id=\"${item.id}\" name=\"${item.label}\" room=\"${this.room}\" .onLongClick=${this.onLongClickItem?.bind(this, item)} ${spreadProps(item.getState())} ${spreadProps(item.getPrefs())}/>`;\n        }\n    }\n\n    // stateChanged(state) {\n    //     console.log('grid state changed:', state);\n    // }\n\n    get devices(): iItemModel[] {\n        return getRoom(this.gridId)?.devices\n    }\n\n    render() {\n        return html`<div class=\"canvas\">\n             ${repeat(this.devices, (device) => device.id, (device) => this.renderTile(device))}\n        </div>`\n    }\n\n    checkProxyIntersection(proxy: TileProxy, tile: Tile) {\n        \n        const intersected = this.devices.find(device => {\n            const deviceEl = this.shadowRoot.getElementById(device.id.toString());\n            return device != tile.item && proxy.intersection(deviceEl) > 0.4\n        });\n\n        if(intersected) {\n            console.log('intersected', intersected);\n\n            swapDevicesInRoom(this.gridId, [parseInt(tile.id), intersected.id]);\n            this.requestUpdate();\n            this.debounceOrderChange();\n        }\n    }\n\n    private debounceOrderChange() {\n        clearTimeout(this.debounceTimeout);\n        if(this.onOrderChange && this.gridId) {\n            this.debounceTimeout = setTimeout(() => {\n                this.onOrderChange(this.gridId, this.devices.map(({id}) => id))\n            }, 500);\n        }\n    }\n\n    swapElements(array:any[], index1:number, index2:number) {\n        array[index1] = array.splice(index2, 1, array[index1])[0];\n    };\n}","import { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators.js\";\nimport { connect } from \"pwa-helpers\";\nimport store from \"../state\";\n\n@customElement('info-bar')\nexport default class InfoBar extends connect(store)(LitElement) {\n    static styles = css`\n    .bar {\n        padding: var(--tile-gap);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        color: rgba(255, 255, 255, 0.75);\n        text-align: right;\n    }\n\n    .home {\n        font-weight: 100;\n        font-weight: 100;\n        font-size: 4vw;\n        text-transform: uppercase;\n    }\n\n    .room {\n        font-weight: 400;\n        margin-top: -25px;\n    }\n\n    .clock {\n        font-weight: 600;\n        font-size: 8vw;\n    }\n\n    .date {\n        margin-top: -1.4vw;\n        font-weight: 100;\n        text-transform: uppercase;\n        font-size: 1.8vw;\n    }`;\n\n    render() {\n        return html`<div class=\"bar\">\n            <h1 class=\"home\">${this.home}</h1>\n            <!-- <h3 class=\"room\">${this.room}</h3>        -->\n            \n            ${this.renderClock()}\n            ${this.renderDate()}\n        </div>`;\n    }\n\n    renderClock() {\n        return html`<div class=\"clock\">\n            ${this.time}\n        </div>`\n    }\n\n    renderDate() {\n        return html`<div class=\"date\">${this.date}\n        </div>`\n    }\n\n    @property()\n    home?: string;\n\n    @property()\n    room?: string;\n\n    @property()\n    time;\n\n    @property()\n    date;\n\n    tickTimeout: Node.Timeout;\n\n    stateChanged(state) {\n        this.home = state.home.name;\n        this.room = state.rooms.find(({id}) => id == state.app.room)?.name;\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        this.tick();\n    }\n\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        clearTimeout(this.tickTimeout);\n    }\n\n    tick() {\n        const today = new Date();\n    \n        // get time components\n        const hours = today.getHours();\n        const minutes = today.getMinutes();\n        const seconds = today.getSeconds();\n    \n        //add '0' to hour, minute & second when they are less 10\n        const hour = hours < 10 ? \"0\" + hours : hours;\n        const minute = minutes < 10 ? \"0\" + minutes : minutes;\n        const second = seconds < 10 ? \"0\" + seconds : seconds;\n    \n        // get date components\n        const month = today.getMonth();\n        const year = today.getFullYear();\n        const day = today.getDate();\n    \n        //declaring a list of all months in  a year\n        const monthList = [\n          \"January\",\n          \"February\",\n          \"March\",\n          \"April\",\n          \"May\",\n          \"June\",\n          \"July\",\n          \"August\",\n          \"September\",\n          \"October\",\n          \"November\",\n          \"December\"\n        ];\n\n        const dateSuffix = [\n            'th',\n            'st',\n            'nd',\n            'rd',\n            'th',\n            'th',\n            'th',\n            'th',\n            'th',\n            'th'\n        ]\n    \n        //get current date and time\n        const date = day + \"\" + dateSuffix[day > 10 ? day.toString()[1] : day] + \" of \" + monthList[month] + \" \" + year;\n        const time = hour + \":\" + minute;\n    \n        this.date = date;\n        this.time = time;\n        this.tickTimeout = setTimeout(this.tick.bind(this), 1000);\n      }\n    \n}","import {html, css, LitElement, TemplateResult} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport { spread } from '../../component-utils';\nimport Device from '../../models/device';\nimport Group from '../../models/group';\nimport { Meta } from '../../models/meta';\nimport iItemModel from '../../models/iItem';\n\n@customElement('popover-base')\nexport default class Popover extends LitElement {\n    static styles = css`\n        @import url(\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200\");\n        .icon {\n            font-family: 'Material Symbols Outlined';\n            font-weight: normal;\n            font-style: normal;\n            font-size: 24px;\n            line-height: 1;\n            letter-spacing: normal;\n            text-transform: none;\n            display: inline-block;\n            white-space: nowrap;\n            word-wrap: normal;\n            direction: ltr;\n            -webkit-font-feature-settings: 'liga';\n            -webkit-font-smoothing: antialiased;\n            font-variation-settings:\n                'FILL' 1,\n                'wght' 400,\n                'GRAD' 0,\n                'opsz' 24\n        }\n\n        .popover {\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            width: 460px;\n            height: 500px;\n            border-radius: 3px;\n            background: rgba(255, 255, 255, 0.85);\n            transform: translateX(-50%) translateY(-50%);\n            z-index: 10;\n            box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);\n            backdrop-filter: blur(8px);\n            padding: 12px;\n            box-sizing: border-box;\n            max-width: calc(100% - 12px);\n        }\n\n        @media only screen and (max-width: 500px) {\n            .popover  {\n                height: calc(100% - 100px);\n            }\n        }\n\n        .popover .button {\n            position: absolute;\n            top: 8px;\n            right: 8px;\n            border-radius: 50%;\n            background: rgba(0,0,0,0.1);\n            padding: 4px;\n            cursor: pointer;\n        }\n\n        .popover .title {\n            font-weight: 100;\n            margin: 0;\n        }`;\n\n    @property()\n    title: string;\n\n    @property({attribute: false})\n    meta: Meta;\n\n    @property()\n    type: string;\n\n    @property({attribute: false})\n    item: iItemModel;\n\n    @property({attribute: false})\n    onClose: () => void;\n\n    @property({attribute: false})\n    onItemChange: (item: Device|Group, attribute: string, value: any) => void\n\n    render() {\n        return html`<div class=\"popover\">\n                <h2 class=\"title\">${this.title}</h2>\n                <div class=\"button\" @click=${this.onClose}>\n                    <span class=\"icon\">close</span>\n                </div>\n                ${this.renderControls()}\n                ${this.renderContent()}\n            </div>\n        </div>`\n    }\n\n    renderContent(): TemplateResult {\n        return html`this element must be extended`\n    }\n\n    renderControls(): TemplateResult {\n        return html`<div class=\"group-controls\">\n            ${this.renderGroupControlsForType()}\n        </div>`\n    }\n\n    renderGroupControlsForType() {\n        switch (this.type) {\n            case \"light\":\n                return html`<controls-light .meta=${this.item.getMeta()} ${spread(this.item.getState())} .item=${this.item}/>`\n            case \"switch\":\n                return html`<controls-switch ${spread(this.item.getPrefs())} .item=${this.item}/>`\n        }\n    }\n}","import {html, css, TemplateResult} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport Popover from './popover-base';\nimport Device from '../../models/device';\nimport Home from '../../models/home';\n\n@customElement('popover-group')\nexport default class PopoverGroup extends Popover {\n    static styles = [\n        Popover.styles,\n        css`\n        :host {\n            --tile-text-color: #333333;\n            --tile-text-inverse: #999999;\n        }\n\n        .group-controls {\n            height: 200px;\n        }\n        \n        .grid-container {\n            height: calc(100% - 230px);\n            width: 100%;\n            overflow: auto;\n            --mask: linear-gradient(to bottom, \n                rgba(0,0,0, 1) 0,   rgba(0,0,0, 1) 75%, \n                rgba(0,0,0, 0) 99%, rgba(0,0,0, 0) 0\n            ) 100% 50% / 100% 100% repeat-x;\n\n            -webkit-mask: var(--mask); \n            mask: var(--mask);\n        }\n\n        .inner-container {\n            padding-bottom: 50px;\n        }`\n    ];\n\n    @property({attribute: false})\n    home: Home;\n\n    @property({attribute: false})\n    devices: Device[];\n\n    renderContent(): TemplateResult {\n        return html`<div class=\"grid-container\">\n            <div class=\"inner-container\">\n                <device-grid .devices=${this.devices} .home=${this.home} .onItemChange=${this.onItemChange} />\n            </div>\n        </div>`;\n    }\n}","import {html, css, TemplateResult} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport Popover from './popover-base';\nimport Home from '../../models/home';\nimport { Meta } from '../../models/meta';\n\n@customElement('popover-device')\nexport default class PopoverDevice extends Popover {\n    static styles = [\n        Popover.styles,\n        css`\n\n        .controls {\n            height: 100%;\n        }`\n    ];\n\n    @property({attribute: false})\n    home: Home;\n\n    @property()\n    type: string;\n\n    @property({attribute: false})\n    meta: Meta;\n\n    renderContent(): TemplateResult {\n        return html`<p>We should probably add some device control stuff here?</p>`;\n    }\n}","import {html, css, TemplateResult, PropertyValueMap} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport Popover from './popover-base';\nimport Home from '../../models/home';\nimport RoomModel from '../../models/room';\nimport { RoomPrefs } from '../../models/prefs';\n\n@customElement('popover-room-settings')\nexport default class PopoverRoomSettings extends Popover {\n    static styles = [\n        Popover.styles,\n        css``\n    ];\n\n    @property({attribute: false})\n    home: Home;\n\n    @property({attribute: false})\n    room: RoomModel;\n\n    @property({attribute: false})\n    onPrefChange: (roomId: number, pref: string, value: any) => void\n\n    @property({attribute: false})\n    setBackground: (prefs: RoomPrefs) => void;\n\n    renderContent(): TemplateResult {\n        return html`<h3>Background Color</h3>\n        Gradient Color 1: <input type=\"color\" id=\"bgColor1\" .value=${this.room.prefs?.bgColor?.[0] ?? '#1a50e2'} @change=${this.color1Change}/><br>\n        Gradient Color 2: <input type=\"color\" id=\"bgColor2\" .value=${this.room.prefs?.bgColor?.[1] ?? '#1096b1'} @change=${this.color2Change}/><br>\n        Gradient Angle: <input type=\"range\" min=\"0\" max=\"359\" .value=${this.room.prefs?.bgAngle ?? 328} @change=${this.angleChange}>`;\n    }\n\n    color1Change(e: InputEvent) {\n        if(!this.room.prefs.bgColor) {\n            this.room.prefs.bgColor = [];\n        }\n        this.room.prefs.bgColor[0] = e.target.value;\n        this.setBackground(this.room.prefs);\n        this.onPrefChange(this.room.id, 'bgColor', this.room.prefs.bgColor);\n    }\n\n    color2Change(e: InputEvent) {\n        if(!this.room.prefs.bgColor) {\n            this.room.prefs.bgColor = [];\n        }\n        this.room.prefs.bgColor[1] = e.target.value;\n        this.setBackground(this.room.prefs);\n        this.onPrefChange(this.room.id, 'bgColor', this.room.prefs.bgColor);\n    }\n\n    angleChange(e: InputEvent) {\n        this.room.prefs.bgAngle = e.target.value;\n        this.setBackground(this.room.prefs);\n        this.onPrefChange(this.room.id, 'bgAngle', this.room.prefs.bgAngle);\n    }\n\n    changeBg() {\n        document.body.style = `--bg-grad-1: ${this.room.prefs?.bgColor?.[0] ?? '#1a50e2'}; --bg-grad-2: ${this.room.prefs?.bgColor?.[1] ?? '#1096b1'}; --bg-grad-angle: ${this.room.prefs.bgAngle ?? 328}deg; --tile-default-active-color: ${this.rgb()}`;\n    }\n\n    rgb() {\n        var color = this.room.prefs?.bgColor?.[0] ?? '#1a50e2';\n\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(color);\n        return result ? `${parseInt(result[1], 16) + 25}, ${parseInt(result[2], 16) + 25}, ${parseInt(result[3], 16) + 25}` : '';\n    }\n}","import {html, css, LitElement} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport { Ref, createRef, ref } from 'lit/directives/ref.js';\nimport iro from '@jaames/iro';\n\n@customElement('controls-light')\nexport default class LightControls extends LitElement {\n    static styles? = css`\n    :host {\n        display: flex;\n    }\n\n    .color-container {\n        width: 65%;\n        flex-grow: 0;\n        flex-shrink: 0;\n    }\n\n    .tab-container {\n        \n    }\n\n    .tab {\n        width: 30%;\n        color: black;\n        text-decoration: none;\n        padding: 4px 6px;\n        display: inline-block;\n        box-sizing: border-box;\n    }\n\n    .tab.active {\n        font-weight: bold;\n        border-bottom: 2px solid black;\n    }\n\n    .level {\n        display: block;\n        width: 100%;\n        height: 20px;\n        border-radius: 3px;\n        background: rgba(0,0,0,0.2);\n    }\n    `;\n\n    colorPickerRef:Ref = createRef();\n\n    colorPicker:ColorPicker;\n\n    @property({attribute: false})\n    item: iItem;\n\n    @property({attribute: false})\n    meta: lightMeta = {color: false, ct: false, level: false};\n\n    @property({type: String})\n    mode: string;\n\n    @property({type: Number})\n    hue: number;\n  \n    @property({type: Number})\n    saturation: number;\n  \n    @property({type: Number})\n    ct: number;\n\n    @property({type: Number})\n    level: number;\n\n    render() {\n        return html`\n        <div class=\"color-container\">\n            ${this.renderTabs()}\n            ${this.renderTab()}\n        </div>\n        <div class=\"level\"></div>`\n    }\n\n    renderTabs() {\n        if(this.meta.color && this.meta.ct) {\n            return html`<div class=\"tab-container\">\n                <a href=\"#RGB\" class=\"tab ${this.mode == 'RGB' ? 'active' : ''}\" @click=\"${this.switchMode}\">Color</a>\n                <a href=\"#CT\" class=\"tab ${this.mode == 'CT' ? 'active' : ''}\" @click=\"${this.switchMode}\">Temperature</a>\n            </div>`\n        }\n        return null;\n    }\n\n    renderTab() {\n        if(this.meta.color && !this.meta.ct) {\n            return this.renderColorTab();\n        }\n        if(this.meta.ct && !this.meta.color) {\n            return this.renderCTTab();\n        }\n        if(!this.meta.ct && !this.meta.color) {\n            return null;\n        }\n        return this.mode == 'RGB' ? this.renderColorTab() : this.renderCTTab()\n    }\n\n    renderColorTab() {\n        return html`<div>\n            <div id=\"picker\" ${ref(this.colorPickerRef)}></div>\n        </div>`;\n    }\n\n    renderCTTab() {\n        return html`<div>Temp Picker</div>`;\n    }\n\n    switchMode(evt) {\n        evt.preventDefault();\n        const mode = evt.target.href.split('#')[1];\n\n        this.mode = mode;\n    }\n\n    updated(props) {\n        super.updated(props);\n\n        if(this.colorPickerRef.value && !this.colorPicker) {\n            this.colorPicker = new iro.ColorPicker(this.colorPickerRef.value, {\n                width: 150,\n                layoutDirection: 'horizontal',\n                color: this.hsvToRgbHex(this.hue / 360, this.saturation / 100),\n                layout: [\n                    { \n                      component: iro.ui.Wheel,\n                    }\n                ]\n            });\n\n            this.colorPicker.on('color:change', color => {\n                this.hue = color.hsv.h;\n                this.saturation = color.hsv.s;\n            });\n        } else if(!this.colorPickerRef.value) {\n            delete this.colorPicker;\n        }\n\n        if(this.item.el) {\n            const ignoredProps = this.item.el.constructor.ignoredProperties;\n            const filteredProps = [...props.keys()].filter(key => !ignoredProps.includes(key));\n\n            if(filteredProps.length > 0) {\n                filteredProps.forEach(key => {\n                    this.item.el[key] = this[key];\n                    this.item.el.requestUpdate();\n                });\n            }\n        }\n    }\n\n    hsvToRgbHex(h:number = 0, s:number = 0, v:number = 1) {\n        const {r, g, b} = this.HSVtoRGB(h, s, v);\n        return \"#\" + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b);\n    }\n\n    componentToHex(c) {\n        const hex = c.toString(16);\n        return hex.length == 1 ? \"0\" + hex : hex;\n    }\n\n    HSVtoRGB(h, s, v) {\n        var r, g, b, i, f, p, q, t;\n        if (arguments.length === 1) {\n            s = h.s, v = h.v, h = h.h;\n        }\n        i = Math.floor(h * 6);\n        f = h * 6 - i;\n        p = v * (1 - s);\n        q = v * (1 - f * s);\n        t = v * (1 - (1 - f) * s);\n        switch (i % 6) {\n            case 0: r = v, g = t, b = p; break;\n            case 1: r = q, g = v, b = p; break;\n            case 2: r = p, g = v, b = t; break;\n            case 3: r = p, g = q, b = v; break;\n            case 4: r = t, g = p, b = v; break;\n            case 5: r = v, g = p, b = q; break;\n        }\n        return {\n            r: Math.round(r * 255),\n            g: Math.round(g * 255),\n            b: Math.round(b * 255)\n        };\n    }\n}","import {html, css, LitElement} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\n\n@customElement('controls-switch')\nexport default class SwitchControls extends LitElement {\n    static styles? = css`.level {\n        display: block;\n        width: 100%;\n        height: 20px;\n        border-radius: 3px;\n        background: rgba(0,0,0,0.2);\n    }\n    `;\n\n    @property({attribute: false})\n    item: iItem;\n\n    @property()\n    icon?: string;\n\n    render() {\n        return html`\n        <select @change=${e => {this.icon = e.target.value;}}>\n            <option ?selected=${!this.icon || this.icon == 'switch'} value=\"switch\">Switch</option>\n            <option ?selected=${this.icon == 'light'} value=\"light\">Light</option>\n            <option ?selected=${this.icon == 'pump'} value=\"pump\">Pump</option>\n            <option ?selected=${this.icon == 'fan'} value=\"fan\">Fan</option>\n        </select>`\n    }\n\n    updated(oldProps, newProps) {\n        if(this.item.setPrefs) {\n            this.item.setPrefs({icon: this.icon});\n            if(this.item.el) {\n                this.item.el.icon = this.icon;\n                this.item.el.requestUpdate();\n            }\n        }\n    }\n}","import DeviceModel, {type Device} from \"./models/device\";\nimport iItemModel from \"./models/iItem\";\nimport { RoomPrefs } from \"./models/prefs\";\nimport { Room } from \"./models/room\";\nimport DeviceGrid from \"./components/device-grid\";\nimport PopoverGroup from \"./components/popovers/popover-group\";\nimport PopoverDevice from \"./components/popovers/popover-device\";\nimport PopoverRoomSettings from \"./components/popovers/popover-room-settings\";\nimport Hubitat from \"./providers/hubitat\";\nimport iProvider, { providerEvents } from \"./providers/iProvider\";\n\nimport store, {fromProvider, fromProviderUpdate, getRoom, refreshDevices, refreshRoom, setRoom, subscribeToChanges} from \"./state\";\nimport { addEventListener } from \"./store/changeListener\";\n\nif(!window.__homedash_config || !window.__homedash_config.provider) {\n    //TODO: show error about missing config\n    throw new Error('Config not set!');\n}\n\nlet provider: iProvider;\nswitch(window.__homedash_config.provider.type) {\n    case 'hubitat':\n        provider = new Hubitat(window.__homedash_config.provider.server, window.__homedash_config.provider.token);\n        break;\n    default:\n        throw new Error(`Unknown Provider: '${window.__homedash_config.provider.type}'`);\n}\n\nprovider.init()\n    .then(() => {\n        fromProvider(provider);\n\n        subscribeToChanges('app.room', switchRoom);\n        \n        setName();\n        setRooms();\n        init();\n        hideLoader();\n    });\n\nfunction setupEditMode() {\n    const checkbox = document.querySelector('.edit-mode') as HTMLInputElement;\n    const canvas = document.querySelector('.main-canvas') as DeviceGrid;\n    checkbox.addEventListener('change', () => {\n        canvas.editing = checkbox.checked;\n    });\n\n    const settingsButton = document.querySelector('.room-settings-button');\n    settingsButton.addEventListener('click', () => {\n        openRoomSettings(getCurrentRoom());\n    });\n}\n\nfunction setName() {\n    const name = document.querySelector('.sidebar .name') as HTMLDivElement;\n    name.innerText = store.getState().home.name;\n}\n\nfunction setRooms() {\n    const roomMenu = document.querySelector('.sidebar .menu') as HTMLUListElement;\n\n    const menuItems = store.getState().rooms.map(room => {\n        const item = document.createElement('li') as HTMLLIElement;\n        item.innerText = room.name;\n        item.id = `room-${room.id}`;\n        item.addEventListener('click', setRoom.bind(this, room.id));\n\n        return item;\n    });\n\n    menuItems.forEach(item => roomMenu.appendChild(item));\n}\n\nfunction switchRoom(roomId: number, refreshRoom = true) {\n    const room = getRoom(roomId);\n    \n    const canvas = document.querySelector('.main-canvas') as DeviceGrid;\n    const roomName = document.querySelector('.room') as HTMLHeadingElement;\n\n    canvas.room = room.name;\n    canvas.gridId = room.id;\n\n    canvas.onLongClickItem = openPopup;\n    canvas.onOrderChange = roomOrderChange;\n\n    roomName.innerText = room.name;\n\n    setBackground(room.prefs);\n\n    const roomMenu = document.querySelector('.sidebar .menu') as HTMLUListElement;\n    roomMenu.querySelector('.selected')?.classList.remove('selected');\n    roomMenu.querySelector(`#room-${room.id}`).classList.add('selected');\n\n    if(refreshRoom) {\n        provider.refreshRoom(roomId);\n    }\n}\n\nfunction roomOrderChange(roomId: number, order: number[]) {\n    return provider.setRoomPref(roomId, 'order', order);\n}\n\nfunction roomPrefChange(roomId: number, pref: string, value: any) {\n    return provider.setRoomPref(roomId, pref, value);\n}\n\nfunction closePopup() {\n    const popoverContainer = document.querySelector('.popover-container');\n\n    const elements = Array.from(popoverContainer?.children);\n\n    elements?.forEach(element => {\n        popoverContainer?.removeChild(element);\n    });\n}\n\nfunction openPopup(device: iItemModel) {\n    closePopup();\n\n    const popoverContainer = document.querySelector('.popover-container');\n    \n    let popover;\n    if('devices' in device) {\n        popover = document.createElement('popover-group') as PopoverGroup;\n        popover.devices = device.devices;\n    } else {\n        popover = document.createElement('popover-device') as PopoverDevice;\n    }\n\n    popover.title = device.label;\n    popover.type = device.type;\n    popover.item = device;\n    popover.meta = device.getMeta();\n    popover.onClose = closePopup;\n\n    popoverContainer.appendChild(popover);\n}\n\nfunction openRoomSettings(roomId: number) {\n    const room = getRoom(roomId);\n\n    closePopup();\n    const popoverContainer = document.querySelector('.popover-container');\n    \n    const popover = document.createElement('popover-room-settings') as PopoverRoomSettings;\n\n    popover.title = room.name;\n    popover.room = room;\n    popover.onPrefChange = roomPrefChange;\n    popover.setBackground = setBackground;\n    popover.onClose = closePopup;\n\n    popoverContainer.appendChild(popover);\n}\n\nfunction init() {\n    switchRoom(getCurrentRoom(), false);\n    setStateClasses();\n    setupMobileMenu();\n    setupEditMode();\n\n    addEventListener((device, changes) => {\n        Object.entries(changes).forEach(([attribute, value]) => {\n            provider.setDeviceValue(device, attribute, value)\n        })\n    });\n\n    provider.addEventListener(providerEvents.roomRefresh, pushStateForProviderRoomRefresh);\n    provider.addEventListener(providerEvents.deviceUpdates, pushStateForProviderUpdate);\n}\n\nfunction pushStateForProviderUpdate(ids: number[]): void {\n    const devicesChanged = provider.getDevices().filter(device => ids.includes(device.id)).map(DeviceModel.fromObject);\n\n    fromProviderUpdate(devicesChanged);\n}\n\nfunction pushStateForProviderRoomRefresh(devices: Device[], room: Room) {\n    refreshDevices(devices);\n    refreshRoom(room);\n}\n\nfunction hideLoader() {\n    const loading = document.querySelector('.loading');\n    document.body.removeChild(loading);\n}\n\nfunction getCurrentRoom(): number {\n    const appState = store.getState().app;\n\n    return appState.room || provider.getRooms()[0].id;\n}\n\nfunction setBackground(prefs: RoomPrefs): void {\n    const rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(prefs?.bgColor?.[0] ?? '#1a50e2');\n    const tileActive = rgb ? `${parseInt(rgb[1], 16) + 25}, ${parseInt(rgb[2], 16) + 25}, ${parseInt(rgb[3], 16) + 25}` : '';\n\n    document.body.style = `--bg-grad-1: ${prefs?.bgColor?.[0] ?? '#1a50e2'}; --bg-grad-2: ${prefs?.bgColor?.[1] ?? '#1096b1'}; --bg-grad-angle: ${prefs.bgAngle ?? 328}deg; --tile-default-active-color: ${tileActive}`;\n}\n\nfunction setStateClasses() {\n    const appState = store.getState().app;\n\n    if(appState.fullscreen) {\n        document.body.classList.add('fullscreen');\n    } else {\n        document.body.classList.remove('fullscreen');\n    }\n\n    if(appState.infobar != undefined) {\n        document.body.classList.add('infobar');\n    } else {\n        document.body.classList.remove('infobar');\n    }\n}\n\nfunction setupMobileMenu() {\n    const toggle = document.querySelector(\".mobile-sidebar-toggle\");\n    const sidebar = document.querySelector('.sidebar');\n\n    toggle.addEventListener('click', () => {\n        sidebar.classList.toggle('show');\n    });\n}\n\nimport \"./components/tiles\";\nimport \"./components/device-grid\";\nimport \"./components/info-bar\";\nimport \"./components/popovers\";\n\n"],"names":["DeviceModel","state","key","value","prefs","obj","device","Hubitat","server","token","event","callback","deviceId","attribute","Axios","group","roomId","d","data","id","changes","item","room","type","groupName","found","_a","_","name","groups","devices","rooms","acc","possibleGroupName","g","otherDev","groupId","persisted","groupsForDevices","a","b","ia","ib","rawRoom","providerEvents","urlReflectorMiddleware","createListenerMiddleware","action","currentState","parseQuery","setQuery","queryString","pairs","kv","k","v","typeValue","lc","infoType","url","serialiseObject","infoType2","initialState","appSlice","createSlice","setRoom","appReducer","homeSlice","initHome","homeUpdated","homeReducer","roomsSlice","swapDevices","roomAdd","roomRefresh","swapDeviceOrder","roomReducer","devicesSlice","deviceAdd","deviceRefresh","setDeviceState","updateDeviceState","devicesReducer","groupsSlice","groupAdd","setGroupState","groupReducer","GroupModel","meta","inner","vals","stateKey","stateVal","val","dev","RoomModel","callbacks","changeListenerMiddleware","addEventListener","store","configureStore","getDefaultMiddleware","fromProvider","provider","fromProviderUpdate","devicesUpdated","shouldDispatchUpdate","getDevice","refreshDevices","refreshRoom","setRoomAction","getRoom","swapDevicesInRoom","ingroup","setDeviceStateAction","newState","subscribeToChanges","path","w","watch","Tile","connect","LitElement","createRef","html","ref","element","changedProperties","changedKeys","observedChanges","tileState","css","__decorateClass","property","customElement","TileEditable","width","height","rect","dragDistanceX","dragDistanceY","__superGet","TileCamera","CircularProgress","circumference","full","offset","TileTemperature","temp","TileHVAC","_TileClickable","min","max","TileClickable","TileDraggable","change","delta","TileLight","newLevel","r","kelvin","red","green","blue","x","TileLock","TileMedia","_b","_c","app","TileSwitch","TileWindow","TileProxy","el","rectA","rectB","x_overlap","y_overlap","SpreadPropsDirective","AsyncDirective","_spreadData","nothing","part","spreadData","prevData","spreadProps","directive","SpreadEventsDirective","eventName","eventValue","eventData","SpreadDirective","spread","DeviceGrid","_d","_e","_f","_g","_h","_i","repeat","proxy","tile","intersected","deviceEl","array","index1","index2","InfoBar","today","hours","minutes","hour","minute","month","year","day","monthList","dateSuffix","date","time","Popover","PopoverGroup","PopoverDevice","PopoverRoomSettings","e","color","result","LightControls","evt","mode","props","iro","ignoredProps","filteredProps","h","s","c","hex","i","f","p","q","t","SwitchControls","oldProps","newProps","switchRoom","setName","setRooms","init","hideLoader","setupEditMode","checkbox","canvas","openRoomSettings","getCurrentRoom","roomMenu","roomName","openPopup","roomOrderChange","setBackground","order","roomPrefChange","pref","closePopup","popoverContainer","elements","popover","setStateClasses","setupMobileMenu","pushStateForProviderRoomRefresh","pushStateForProviderUpdate","ids","devicesChanged","loading","rgb","tileActive","appState","toggle","sidebar"],"mappings":"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"}